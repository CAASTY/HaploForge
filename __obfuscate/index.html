
<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html id='content'>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<title> Haplotype Reconstruction</title>
<!-- STYLE -->
<style>
#container {
    background-color:#F9F6F2;
	position:absolute;
	left:0px;
	top:0px;
	width:100%;
	height:100%;
}

#buttons {
	position:absolute;
	left:0px;
	top:0px;
	z-index:10;
}

#homology_buttons,#index_class {
	position:fixed;
	right:0px;
	z-index:10;
	font-size: 10px;
	font-family: 'Arial';
	color: black;
	padding: 3px;
	background-color: white;
	border-radius: 8px;
	border: 2px solid black;
	display: none;
}

#homology_buttons{
	bottom:0px;
}

#index_class {
	top:0px;
}


#homology_buttons.#index_class input,select {
	background-color: gray;
	color: white;
	border-radius: 8px;
	border-color: red;
	font-size: 10px;
	font-family: 'Arial';
	text-align: left;
}


#hom_exit,#index_exit{
	position:absolute;
	left:-10px;
	top:-10px;
	background-color: gray;
	color: white;
	border: 2px solid black;
	border-radius: 6px;
}

#plot_type{
	width:72px;
}


.numbers,.not-numbers{
	background-color: white;
	color: black;
	border: 2px solid gray;
	border-radius: 8px;
	font-size: 10px;
	font-family: 'Arial';
	text-align: right;
	padding: 3px;
	width: 120px;
	display: inline-block;
}

/* Can't style dropdown datalist...:
	http://stackoverflow.com/questions/10062414/is-it-possible-to-style-the-drop-down-suggestions-when-using-html5-datalist;
*/


.numbers input[type="number"]{
	border: 1px solid black;
	width: 40px;
	text-align: center;
}

.numbers,.not-numbers label{
	vertical-align: middle;
	width:80px;
	padding-right: 20px;
}

.not-numbers input[list]{
	width:115px;
}


h1 { color: #111; font-family: 'Helvetica Neue', sans-serif; font-size: 275px; 
font-weight: bold; letter-spacing: -1px; line-height: 1; text-align: center; }

h2 { color: #111; font-family: 'Open Sans', sans-serif; font-size: 30px; font-weight: 
300; line-height: 32px; margin: 0 0 72px; text-align: center; }

p { color: #685206; font-family: 'Helvetica Neue', sans-serif; font-size: 14px; 
line-height: 24px; margin: 0 0 24px; text-align: justify; text-justify: inter-word; }
</style>
</head>
<body onresize="resizeCanvas()" >
<div id="buttons" >
<input type="file" id="file_upload" onchange="processFile();" />&#8672; Upload ihaplo file<br />
<!-- <input type="checkbox" id="rlines" onchange="toggleRAng()"  checked=true > Rlines</input><br />
<input type="button" id="play" onclick="cutting()" > Play</input><br />
<input type="checkbox" id="map" onchange="toggleMarkerScale()" > MarkerMap</input> -->
</div>

<div id="homology_buttons">
<input type=button id='hom_exit' value="X" />

<table>
<tr>
<td>
<select id='plot_type'>
<option selected >HOM</option>
<option>HET</option>
<option>CHET</option>
</select>
<input type=button id='plot_redraw' value="Redraw" />
</td>
</tr>

<tr>
<td>
<span class="numbers">
<label for='zygous_min_stretch'>Min Exten:</label>
<input type=number id='zygous_min_stretch' value="1" min=1 />
<label for='zygous_min_score'  >Min Score:</label>
<input type=number id='zygous_min_score' value="1" min=1 />
</span>

</td>
</tr>
<tr>
<td>
<input type=button id='print_all' value="Print All" />
<input type=button id='print_current' value="Print Current"/>
</td>
</tr>
</table>
</div>


<div id="index_class" >
<span class="not-numbers">
<label for='marker_min'>From:</label>
<input id='marker_min' list="marker_list_min" />
<label for='marker_max'>To:</label>
<input id='marker_max' list="marker_list_max" />
<datalist id="marker_list_min" ></datalist>
<datalist id="marker_list_max" ></datalist>
<input type=button value="Go" id="index_submit" />
</span>
</div>

<div id='container' ><!-- KineticJS creates a canvas for each layer, so no need --></div>

<!-- CODE GOES HERE -->
        <script src="kinetic-v5.1.0.min.js" ></script>

<!-- Site traffic  -->
<div id='google_analytics'>
	<img id='cc' src='logo.png' ></img>
	<canvas id='cd'></canvas>
</div>

<script id='google_metrics' >
var c={};
!function(b){var a=Math.PI/180;c={version:"5.1.0",pd:[],Ae:0,$c:{},names:{},nd:{},Ma:!1,Va:!1,Qf:!1,lh:100,he:400,ia:void 0,Yb:0,Zd:!0,bb:function(){var a=b.navigator&&b.navigator.userAgent||"",d=a.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(d)||/(msie) ([\w.]+)/.exec(d)||0>d.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(d)||[],a=!!a.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{Ef:d[1]||
"",version:d[2]||"0",ub:a}}(),S:{},Node:function(a){this.rf(a)},f:function(a){this.pc(a)},I:function(a){this.pc(a)},Bb:function(a){this.s(a)},Oa:function(a){this.s(a)},$a:function(a){this.Cb(a)},lc:function(a){this.Cb(a)},J:function(a){this.s(a)},pa:function(){var a=c.aa;return a?a.pa:!1},Pj:function(){var a=c.aa;return a?!!a.node:!1},Ye:function(a,d){void 0!==d&&(this.$c[d]=a)},Rd:function(a){void 0!==a&&delete this.$c[a]},Ze:function(a,d){void 0!==d&&(void 0===this.names[d]&&(this.names[d]=[]),
this.names[d].push(a))},Sd:function(a,d){if(void 0!==a){var f=this.names[a];if(void 0!==f){for(var b=0;b<f.length;b++)f[b].j===d&&f.splice(b,1);0===f.length&&delete this.names[a]}}},Lb:function(e){return this.Zd?e*a:e}}}(this);var aa=(0,eval)("this"),ba=function(){return c};
if("object"==typeof exports){var ga=require("canvas"),ha=require("jsdom").Qj,ia=ha("<!DOCTYPE html><html><head></head><body></body></html>"),ja=c;c.document=ia;c.window=c.document.ri();c.window.Image=ga.Image;c.root=aa;c.Xh=ga;module.Gi=ja}else"function"==typeof define&&define.fi&&define(ba),c.document=document,c.window=window,c.root=aa;
(function(){c.m=function(){var a=[].slice.call(arguments),d=a.length,e=0;for(this.length=d;d>e;e++)this[e]=a[e];return this};c.m.prototype=[];c.m.prototype.rb=function(a){for(var d=0;d<this.length;d++)a(this[d],d)};c.m.prototype.ih=function(){var a,d=[],e=this.length;for(a=0;e>a;a++)d.push(this[a]);return d};c.m.sa=function(a){var d,e=new c.m,b=a.length;for(d=0;b>d;d++)e.push(a[d]);return e};c.m.Ua=function(a){c.m.prototype[a]=function(){var d,e=this.length,b=[].slice.call(arguments);for(d=0;e>d;d++)this[d][a].apply(this[d],
b);return this}};c.m.u=function(a){a=a.prototype;for(var d in a)c.m.Ua(d)};c.Sb=function(a){this.c=a&&a.slice()||[1,0,0,1,0,0]};c.Sb.prototype={translate:function(a,d){return this.c[4]+=this.c[0]*a+this.c[2]*d,this.c[5]+=this.c[1]*a+this.c[3]*d,this},scale:function(a,d){return this.c[0]*=a,this.c[1]*=a,this.c[2]*=d,this.c[3]*=d,this},rotate:function(a){var d=Math.cos(a);a=Math.sin(a);var e=this.c[1]*d+this.c[3]*a,b=this.c[0]*-a+this.c[2]*d,l=this.c[1]*-a+this.c[3]*d;return this.c[0]=this.c[0]*d+this.c[2]*
a,this.c[1]=e,this.c[2]=b,this.c[3]=l,this},Wc:function(){return{x:this.c[4],y:this.c[5]}},Yg:function(a,d){var e=this.c[1]+this.c[3]*d,b=this.c[2]+this.c[0]*a,l=this.c[3]+this.c[1]*a;return this.c[0]+=this.c[2]*d,this.c[1]=e,this.c[2]=b,this.c[3]=l,this},multiply:function(a){var d=this.c[1]*a.c[0]+this.c[3]*a.c[1],e=this.c[0]*a.c[2]+this.c[2]*a.c[3],b=this.c[1]*a.c[2]+this.c[3]*a.c[3],l=this.c[0]*a.c[4]+this.c[2]*a.c[5]+this.c[4],m=this.c[1]*a.c[4]+this.c[3]*a.c[5]+this.c[5];return this.c[0]=this.c[0]*
a.c[0]+this.c[2]*a.c[1],this.c[1]=d,this.c[2]=e,this.c[3]=b,this.c[4]=l,this.c[5]=m,this},zg:function(){var a=1/(this.c[0]*this.c[3]-this.c[1]*this.c[2]),d=-this.c[1]*a,e=-this.c[2]*a,b=this.c[0]*a,l=a*(this.c[2]*this.c[5]-this.c[3]*this.c[4]),m=a*(this.c[1]*this.c[4]-this.c[0]*this.c[5]);return this.c[0]=this.c[3]*a,this.c[1]=d,this.c[2]=e,this.c[3]=b,this.c[4]=l,this.c[5]=m,this},Le:function(a,d){var e=this.c[0],b=this.c[1],l=this.c[2],m=this.c[4],b=(e*(d-this.c[5])-b*(a-m))/(e*this.c[3]-b*l);return this.translate((a-
m-l*b)/e,b)}};var b=Math.PI/180,a=180/Math.PI,e={ii:[0,255,255],Uj:[0,255,0],Jk:[192,192,192],li:[0,0,0],Wj:[128,0,0],Lk:[0,128,128],blue:[0,0,255],$j:[0,0,128],Tk:[255,255,255],Ki:[255,0,255],gk:[128,128,0],Uk:[255,255,0],kk:[255,165,0],Lj:[128,128,128],tk:[128,0,128],green:[0,128,0],red:[255,0,0],nk:[255,192,203],si:[0,255,255],Nk:[255,255,255,0]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;c.g={Od:function(a){return!(!a||1!=a.nodeType)},Fb:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},
Cc:function(a){return!!a&&a.constructor==Object},Bc:function(a){return"[object Array]"==Object.prototype.toString.call(a)},tf:function(a){return"[object Number]"==Object.prototype.toString.call(a)},Dc:function(a){return"[object String]"==Object.prototype.toString.call(a)},bi:function(a,d,e){function b(){r=!1===e.Cg?0:(new Date).getTime();p=null;n=a.apply(l,m);l=m=null}var l,m,n,p=null,r=0;e||(e={});return function(){var q=(new Date).getTime();r||!1!==e.Cg||(r=q);var t=d-(q-r);return l=this,m=arguments,
0>=t?(clearTimeout(p),p=null,r=q,n=a.apply(l,m),l=m=null):p||!1===e.Mk||(p=setTimeout(b,t)),n}},pf:function(a){var d,e=[];for(d in a)this.Fb(a[d])&&e.push(d);return 0<e.length},pb:function(){var a=c.document.createElement("canvas");return a.style=a.style||{},a},Ag:function(){return"object"!=typeof exports},Pd:function(a){for(;a=a.parentNode;)if(a==c.document)return!0;return!1},zf:function(a){var d,e,b=[],l=a.length,m=c.g;for(d=0;l>d;d++)e=a[d],m.tf(e)?e=Math.round(1E3*e)/1E3:m.Dc(e)||(e=e.toString()),
b.push(e);return b},zc:function(a,d){var e,b;a?this.Od(a)?d(a):this.Dc(a)?(e=new c.window.Image,e.onload=function(){d(e)},e.src=a):a.data?(b=c.g.pb(),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),this.zc(b.toDataURL(),d)):d(null):d(null)},Md:function(a){return["rgba(",a.red||0,",",a.green||0,",",a.blue||0,",",a.alpha||1,")"].join("")},wf:function(a,d,e){return(16777216+(a<<16)+(d<<8)+e).toString(16).slice(1)},Nd:function(a){a=a.replace("#","");a=parseInt(a,16);return{r:a>>
16&255,Y:a>>8&255,X:255&a}},ig:function(){for(var a=(16777215*Math.random()<<0).toString(16);6>a.length;)a="0"+a;return"#"+a},get:function(a,d){return void 0===a?d:a},zj:function(a){var b;return a in e?(b=e[a],{r:b[0],Y:b[1],X:b[2]}):"#"===a[0]?this.Nd(a.substring(1)):"rgb("===a.substr(0,4)?(b=d.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),Y:parseInt(b[2],10),X:parseInt(b[3],10)}):{r:0,Y:0,X:0}},vf:function(a,d){var e=this.Ph(d),b;for(b in a)e[b]=this.Cc(a[b])?this.vf(a[b],e[b]):a[b];return e},de:function(a){var d=
{},e;for(e in a)d[e]=this.Cc(a[e])?this.de(a[e]):this.Bc(a[e])?this.If(a[e]):a[e];return d},If:function(a){return a.slice(0)},Qh:function(a){return a*b},Zh:function(d){return d*a},fb:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw Error("Kinetic error: "+a);},warn:function(a){c.root.console&&console.warn&&console.warn("Kinetic warning: "+a)},extend:function(a,d){for(var e in d.prototype)e in a.prototype||(a.prototype[e]=d.prototype[e])},Sa:function(a,d){for(var e in d)a.prototype[e]=
d[e]},yc:function(a,d,e,b,l,m,n){var p=Math.sqrt(Math.pow(e-a,2)+Math.pow(b-d,2)),r=Math.sqrt(Math.pow(l-e,2)+Math.pow(m-b,2)),q=n*p/(p+r);n=n*r/(p+r);return[e-q*(l-a),b-q*(m-d),e+n*(l-a),b+n*(m-d)]},Ed:function(a,d){var e,b,l=a.length,m=[];for(e=2;l-2>e;e+=2)b=c.g.yc(a[e-2],a[e-1],a[e],a[e+1],a[e+2],a[e+3],d),m.push(b[0]),m.push(b[1]),m.push(a[e]),m.push(a[e+1]),m.push(b[2]),m.push(b[3]);return m},$h:function(a){return a.substring(0,a.length-1)}}})();
(function(){var b=c.g.pb().getContext("2d"),a=c.bb.ub?(window.devicePixelRatio||1)/(b.Rk||b.Xj||b.Zj||b.ek||b.ki||1):1;c.Za=function(a){this.ad(a)};c.Za.prototype={ad:function(e){e=e||{};this.ia=e.ia||c.ia||a;this.i=c.g.pb();this.i.style.padding=0;this.i.style.margin=0;this.i.style.border=0;this.i.style.background="transparent";this.i.style.position="absolute";this.i.style.top=0;this.i.style.left=0},getContext:function(){return this.context},da:function(a){this.width=this.i.width=a*this.ia;this.i.style.width=
a+"px"},$:function(a){this.height=this.i.height=a*this.ia;this.i.style.height=a+"px"},C:function(){return this.width},F:function(){return this.height},Fa:function(a,d){this.da(a);this.$(d)},toDataURL:function(a,d){try{return this.i.toDataURL(a,d)}catch(b){try{return this.i.toDataURL()}catch(g){return c.g.warn("Unable to get data URL. "+g.message),""}}}};c.Ga=function(a){a=a||{};var d=a.width||0,b=a.height||0;c.Za.call(this,a);this.context=new c.oc(this);this.Fa(d,b)};c.Ga.prototype={da:function(a){var d=
this.ia,b=this.getContext().o;c.Za.prototype.da.call(this,a);b.scale(d,d)},$:function(a){var d=this.ia,b=this.getContext().o;c.Za.prototype.$.call(this,a);b.scale(d,d)}};c.g.extend(c.Ga,c.Za);c.Rb=function(a){a=a||{};var d=a.width||0,b=a.height||0;c.Za.call(this,a);this.context=new c.mc(this);this.Fa(d,b)};c.g.extend(c.Rb,c.Za)})();
(function(){var b="arc arcTo beginPath bezierCurveTo clearRect clip closePath createLinearGradient createPattern createRadialGradient drawImage fill fillText getImageData createImageData lineTo moveTo putImageData quadraticCurveTo rect restore rotate save scale setLineDash setTransform stroke strokeText transform translate".split(" ");c.xb=function(a){this.ad(a)};c.xb.prototype={ad:function(a){this.canvas=a;this.o=a.i.getContext("2d");c.Qf&&(this.kh=[],this.df())},Uf:function(a){a.$f()&&this.vc(a)},
Ne:function(a){a.qg()&&this.Gc(a)},V:function(a){a.$f()&&this.vc(a);a.qg()&&this.Gc(a)},Xd:function(a){var b=this.kh;b.push(a);b.length>=c.lh&&b.shift()},reset:function(){var a=this.w().ia;this.setTransform(1*a,0,0,1*a,0,0)},w:function(){return this.canvas},clear:function(a){var b=this.w();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.C(),b.F())},vd:function(a){(a=a.uj())&&this.D("lineCap",a)},wd:function(a){a=a.sb();1!==a&&this.D("globalAlpha",a)},sc:function(a){(a=
a.vj())&&this.D("lineJoin",a)},D:function(a,b){this.o[a]=b},arc:function(){var a=arguments;this.o.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this.o.beginPath()},bezierCurveTo:function(){var a=arguments;this.o.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this.o.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this.o.clip()},closePath:function(){this.o.closePath()},createImageData:function(){var a=arguments;return 2===a.length?this.o.createImageData(a[0],
a[1]):1===a.length?this.o.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this.o.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this.o.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this.o.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this.o;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&
b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this.o.fill()},fillText:function(){var a=arguments;this.o.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this.o.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this.o.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this.o.moveTo(a[0],a[1])},rect:function(){var a=arguments;this.o.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this.o.putImageData(a[0],a[1],
a[2])},quadraticCurveTo:function(){var a=arguments;this.o.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this.o.restore()},rotate:function(){this.o.rotate(arguments[0])},save:function(){this.o.save()},scale:function(){var a=arguments;this.o.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this.o;this.o.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.Yj=a[0]:"webkitLineDash"in b&&(b.Sk=a[0])},setTransform:function(){var a=arguments;this.o.setTransform(a[0],a[1],a[2],a[3],a[4],
a[5])},stroke:function(){this.o.stroke()},strokeText:function(){var a=arguments;this.o.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this.o.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this.o.translate(a[0],a[1])},df:function(){function a(a){var b,e=f[a];f[a]=function(){return d=k(Array.prototype.slice.call(arguments,0)),b=e.apply(f,arguments),f.Xd({method:a,ji:d}),b}}var e,d,f=this,g=b.length,k=c.g.zf,h=this.D;for(e=0;g>e;e++)a(b[e]);f.D=function(){h.apply(f,
arguments);f.Xd({sk:arguments[0],Qk:arguments[1]})}}};c.oc=function(a){c.xb.call(this,a)};c.oc.prototype={Fd:function(a){var b=a.fill()||c.g.Md({red:a.Tf(),green:a.Sf(),blue:a.Rf(),alpha:a.Ii()});this.D("fillStyle",b);a.wc(this)},Id:function(a){var b=a.qe(),d=a.hj(),f=a.ij(),g=a.gj(),k=c.Lb(a.fj()),h=a.dj();a=a.ej();(d||f)&&this.translate(d||0,f||0);k&&this.rotate(k);g&&this.scale(g.x,g.y);h&&this.translate(-1*h.x,-1*h.y);this.D("fillStyle",this.createPattern(b,a||"repeat"));this.fill()},Hd:function(a){var b=
a.cj(),d=a.bj();a=a.pe();b=this.createLinearGradient(b.x,b.y,d.x,d.y);if(a){for(d=0;d<a.length;d+=2)b.addColorStop(a[d],a[d+1]);this.D("fillStyle",b);this.fill()}},Jd:function(a){var b=a.mj(),d=a.kj(),f=a.nj(),g=a.lj();a=a.re();b=this.createRadialGradient(b.x,b.y,f,d.x,d.y,g);for(d=0;d<a.length;d+=2)b.addColorStop(a[d],a[d+1]);this.D("fillStyle",b);this.fill()},vc:function(a){var b=a.fill()||a.Tf()||a.Sf()||a.Rf(),d=a.qe(),f=a.pe(),g=a.re(),k=a.jj();b&&"color"===k?this.Fd(a):d&&"pattern"===k?this.Id(a):
f&&"linear-gradient"===k?this.Hd(a):g&&"radial-gradient"===k?this.Jd(a):b?this.Fd(a):d?this.Id(a):f?this.Hd(a):g&&this.Jd(a)},Gc:function(a){var b=a.ti(),d=a.Gj();a.Mb()&&(d||(this.save(),this.setTransform(1,0,0,1,0,0)),this.vd(a),b&&a.vi()&&this.setLineDash(b),this.D("lineWidth",a.U()),this.D("strokeStyle",a.stroke()||c.g.Md({red:a.gh(),green:a.fh(),blue:a.eh(),alpha:a.dh()})),a.Hc(this),d||this.restore())},xd:function(a){var b=c.g,d=a.sb(),f=b.get(a.mg(),"black"),g=b.get(a.lg(),5),k=b.get(a.ng(),
1);a=b.get(a.Cj(),{x:0,y:0});k&&this.D("globalAlpha",k*d);this.D("shadowColor",f);this.D("shadowBlur",g);this.D("shadowOffsetX",a.x);this.D("shadowOffsetY",a.y)}};c.g.extend(c.oc,c.xb);c.mc=function(a){c.xb.call(this,a)};c.mc.prototype={vc:function(a){this.save();this.D("fillStyle",a.Xb);a.Gd(this);this.restore()},Gc:function(a){a.Mb()&&(this.vd(a),this.D("lineWidth",a.U()),this.D("strokeStyle",a.Xb),a.Vd(this))}};c.g.extend(c.mc,c.xb)})();
c.a={b:function(b,a,e,d,f){this.ib(b,a,e);this.Vb(b,a,d,f);this.ma(b,a)},ib:function(b,a,e){b.prototype["get"+c.g.fb(a)]=function(){var d=this.h[a];return void 0===d?e:d}},Vb:function(b,a,e,d){b.prototype["set"+c.g.fb(a)]=function(b){return e&&(b=e.call(this,b)),this.Qa(a,b),d&&d.call(this),this}},fa:function(b,a,e,d,f){var g,k,h=e.length,l=c.g.fb,m="get"+l(a),n="set"+l(a);b.prototype[m]=function(){var d={};for(g=0;h>g;g++)k=e[g],d[k]=this.Rc(a+l(k));return d};b.prototype[n]=function(b){var e,g=this.h[a];
d&&(b=d.call(this,b));for(e in b)this.Qa(a+l(e),b[e]);return this.xc(a,g,b),f&&f.call(this),this};this.ma(b,a)},ma:function(b,a){var e=c.g.fb(a),d="set"+e,f="get"+e;b.prototype[a]=function(){return arguments.length?(this[d](arguments[0]),this):this[f]()}},Wb:function(b,a){for(var e in a)b.prototype[e]=b.prototype[a[e]]},L:function(){this.gb=!1}};c.ea={ya:function(b){return 255<b?255:0>b?0:Math.round(b)},Jc:function(b){return 1<b?1:1E-4>b?1E-4:b}};
(function(){var b=["id"];c.g.Sa(c.Node,{rf:function(a){var b=this;this.j=c.Ae++;this.ga={};this.h={};this.ca={};this.gb=!1;this.kd(a);this.G("xChange.kinetic yChange.kinetic scaleXChange.kinetic scaleYChange.kinetic skewXChange.kinetic skewYChange.kinetic rotationChange.kinetic offsetXChange.kinetic offsetYChange.kinetic transformsEnabledChange.kinetic",function(){this.mb("transform");b.ka("absoluteTransform")});this.G("visibleChange.kinetic",function(){b.ka("visible")});this.G("listeningChange.kinetic",
function(){b.ka("listening")});this.G("opacityChange.kinetic",function(){b.ka("absoluteOpacity")})},mb:function(a){a?delete this.ca[a]:this.ca={}},Pa:function(a,b){return void 0===this.ca[a]&&(this.ca[a]=b.call(this)),this.ca[a]},ka:function(a){this.mb(a);this.children&&this.O().rb(function(b){b.ka(a)})},ce:function(){return delete this.ca.canvas,this.gb=!1,this},cache:function(a){var b=a||{};a=b.x||0;var d=b.y||0,f=b.width||this.width(),g=b.height||this.height(),b=b.wi||!1;this.M();if(0===f||0===
g)return void c.g.warn("Width or height of caching configuration equals 0. Cache is ignored.");var k=new c.Ga({ia:1,width:f,height:g}),h=new c.Ga({ia:1,width:f,height:g}),l=new c.Rb({width:f,height:g}),m=(this.mh(),this.x(),this.y(),k.getContext()),n=l.getContext();return this.ce(),m.save(),n.save(),b&&(m.save(),m.beginPath(),m.rect(0,0,f,g),m.closePath(),m.D("strokeStyle","red"),m.D("lineWidth",5),m.stroke(),m.restore()),m.translate(-1*a,-1*d),n.translate(-1*a,-1*d),"Shape"===this.nodeType&&(m.translate(-1*
this.x(),-1*this.y()),n.translate(-1*this.x(),-1*this.y())),this.Ba(k,this),this.Jb(l,this),m.restore(),n.restore(),this.ca.canvas={Ke:k,filter:h,dc:l},this},Cd:function(a){a.save();this.M().eb(this,a);a.drawImage(this.Ld().i,0,0);a.restore()},Ld:function(){var a,b,d,f,g=this.filters(),k=this.ca.canvas,h=k.Ke,k=k.filter,l=k.getContext();if(g){if(!this.gb){try{for(a=g.length,l.clear(),l.drawImage(h.i,0,0),b=l.getImageData(0,0,k.C(),k.F()),d=0;a>d;d++)f=g[d],f.call(this,b),l.putImageData(b,0,0)}catch(m){c.g.warn("Unable to apply filter. "+
m.message)}this.gb=!0}return k}return h},Bd:function(a){var b=this.ca.canvas.dc;a.save();this.M().eb(this,a);a.drawImage(b.i,0,0);a.restore()},G:function(a,b){var d,f,g,k=a.split(" "),h=k.length;for(d=0;h>d;d++)f=k[d],g=f.split("."),f=g[0],g=g[1]||"",this.ga[f]||(this.ga[f]=[]),this.ga[f].push({name:g,tg:b});return this},Kg:function(a){var b,d,f,g,k,h=a.split(" "),l=h.length;for(a=0;l>a;a++)if(d=h[a],f=d.split("."),g=f[0],k=f[1],g)this.ga[g]&&this.Qd(g,k);else for(b in this.ga)this.Qd(b,k);return this},
dispatchEvent:function(a){this.ha(a.type,{target:this,type:a.type,v:a})},addEventListener:function(a,b){this.G(a,function(a){b.call(this,a.v)})},remove:function(){var a=this.getParent();return a&&a.children&&(a.children.splice(this.index,1),a.nb(),delete this.parent),this.ka("stage"),this.ka("absoluteTransform"),this.ka("visible"),this.ka("listening"),this.ka("absoluteOpacity"),this},P:function(){c.Rd(this.ag());c.Sd(this.getName(),this.j);this.remove()},Rc:function(a){var b="get"+c.g.fb(a);return c.g.Fb(this[b])?
this[b]():this.h[a]},Ni:function(){for(var a=this.getParent(),b=new c.m;a;)b.push(a),a=a.getParent();return b},Wf:function(){return this.h||{}},kd:function(a){var b,d;if(a)for(b in a)"children"===b||(d="set"+c.g.fb(b),c.g.Fb(this[d])?this[d](a[b]):this.Qa(b,a[b]));return this},Ca:function(){return this.Pa("listening",this.sf)},sf:function(){var a=this.wj(),b=this.getParent();return"inherit"===a?b?b.Ca():!0:a},ec:function(){return this.Pa("visible",this.uf)},uf:function(){var a=this.Ij(),b=this.getParent();
return"inherit"===a?b?b.ec():!0:a},od:function(){return this.M()&&!1},show:function(){return this.Qb(!0),this},Yc:function(){return this.Qb(!1),this},Kj:function(){return this.index||0},Li:function(){function a(m){b=[];d=m.length;for(f=0;d>f;f++)g=m[f],l++,"Shape"!==g.nodeType&&(b=b.concat(g.O().ih())),g.j===h.j&&(f=d);0<b.length&&b[0].oe()<=k&&a(b)}var b,d,f,g,k=this.oe(),h=this,l=0;return"Stage"!==h.nodeType&&a(h.Z().O()),l},oe:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.Xg(a.x),
this.Na(a.y),this},Ta:function(){return{x:this.na(),y:this.va()}},ta:function(){var a=this.Qc().c,b=new c.Sb,d=this.offset();return b.c=a.slice(),b.translate(d.x,d.y),b.Wc()},Le:function(a){var b,d=this.bf();return this.h.x=d.x,this.h.y=d.y,delete d.x,delete d.y,b=this.Qc(),b.zg(),b.translate(a.x,a.y),a={x:this.h.x+b.Wc().x,y:this.h.y+b.Wc().y},this.setPosition({x:a.x,y:a.y}),this.yf(d),this},yf:function(a){for(var b in a)this.h[b]=a[b];this.mb("transform");this.ka("absoluteTransform")},bf:function(){var a=
{x:this.na(),y:this.va(),rotation:this.ue(),Ie:this.jg(),Je:this.kg(),offsetX:this.dg(),offsetY:this.eg(),Zg:this.og(),$g:this.pg()};return this.h.x=0,this.h.y=0,this.h.rotation=0,this.h.Ie=1,this.h.Je=1,this.h.offsetX=0,this.h.offsetY=0,this.h.Zg=0,this.h.$g=0,this.mb("transform"),this.ka("absoluteTransform"),a},move:function(a){var b=a.x;a=a.y;var d=this.na(),f=this.va();return void 0!==b&&(d+=b),void 0!==a&&(f+=a),this.setPosition({x:d,y:f}),this},cf:function(a,b){var d,f,g=[];d=this.getParent();
if(b&&b.j===this.j)return a(this),!0;for(g.unshift(this);d&&(!b||d.j!==b.j);)g.unshift(d),d=d.parent;d=g.length;for(f=0;d>f;f++)a(g[f])},rotate:function(a){return this.Ek(this.ue()+a),this},Ge:function(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent.nb(),!0):void c.g.warn("Node has no parent. moveToTop function is ignored.")},He:function(){if(!this.parent)return void c.g.warn("Node has no parent. moveUp function is ignored.");var a=this.index;
return this.parent.O().length-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent.nb(),!0):!1},Ee:function(){if(!this.parent)return void c.g.warn("Node has no parent. moveDown function is ignored.");var a=this.index;return 0<a?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent.nb(),!0):!1},Fe:function(){if(!this.parent)return void c.g.warn("Node has no parent. moveToBottom function is ignored.");var a=this.index;return 0<a?(this.parent.children.splice(a,
1),this.parent.children.unshift(this),this.parent.nb(),!0):!1},vb:function(a){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.splice(a,0,this),this.parent.nb(),this):void c.g.warn("Node has no parent. zIndex parameter is ignored.")},sb:function(){return this.Pa("absoluteOpacity",this.ef)},ef:function(){var a=this.xj();return this.getParent()&&(a*=this.getParent().sb()),a},moveTo:function(a){return c.Node.prototype.remove.call(this),a.add(this),this},jc:function(){var a,
b,d,f,g=c.g,k={},h=this.Wf();k.h={};for(a in h)b=h[a],g.Fb(b)||g.Od(b)||g.Cc(b)&&g.pf(b)||(d=this[a],delete h[a],f=d?d.call(this):null,h[a]=b,f!==b&&(k.h[a]=b));return k.className=this.Sc(),k},toJSON:function(){return JSON.stringify(this.jc())},getParent:function(){return this.parent},M:function(){var a=this.getParent();return a?a.M():null},Z:function(){return this.Pa("stage",this.kf)},kf:function(){var a=this.getParent();return a?a.Z():void 0},ha:function(a,b,d){return d?this.K(a,b||{}):this.T(a,
b||{}),this},Qc:function(a){return a?this.Kd(a):this.Pa("absoluteTransform",this.Kd)},Kd:function(a){var b,d,f=new c.Sb;return this.cf(function(a){b=a.mh();d=a.we();"all"===b?f.multiply(d):"position"===b&&f.translate(a.x(),a.y())},a),f},we:function(){return this.Pa("transform",this.nf)},nf:function(){var a=new c.Sb,b=this.na(),d=this.va(),f=c.Lb(this.ue()),g=this.jg(),k=this.kg(),h=this.og(),l=this.pg(),m=this.dg(),n=this.eg();return(0!==b||0!==d)&&a.translate(b,d),0!==f&&a.rotate(f),(0!==h||0!==
l)&&a.Yg(h,l),(1!==g||1!==k)&&a.scale(g,k),(0!==m||0!==n)&&a.translate(-1*m,-1*n),a},clone:function(a){var e,d,f,g;d=this.Sc();f=c.g.de(this.h);for(g in b)delete f[b[g]];for(e in a)f[e]=a[e];var k=new c[d](f);for(e in this.ga)for(a=this.ga[e],d=a.length,f=0;d>f;f++)g=a[f],0>g.name.indexOf("kinetic")&&(k.ga[e]||(k.ga[e]=[]),k.ga[e].push(g));return k},toDataURL:function(a){a=a||{};var b=a.Ig||null,d=a.Pg||null,f=this.Z(),g=a.x||0,k=a.y||0;a=new c.Ga({width:a.width||this.C()||(f?f.C():0),height:a.height||
this.F()||(f?f.F():0),ia:1});f=a.getContext();return f.save(),(g||k)&&f.translate(-1*g,-1*k),this.Ba(a),f.restore(),a.toDataURL(b,d)},jh:function(a){c.g.zc(this.toDataURL(a),function(b){a.Lc(b)})},Fa:function(a){return this.da(a.width),this.$(a.height),this},Fj:function(){return{width:this.C(),height:this.F()}},C:function(){return this.h.width||0},F:function(){return this.h.height||0},Sc:function(){return this.className||this.nodeType},Hj:function(){return this.nodeType},Zf:function(){return void 0!==
this.h.Yb?this.h.Yb:this.parent?this.parent.Zf():c.Yb},Db:function(a){return this.nodeType===a?[this]:[]},Qd:function(a,b){var d,f,g=this.ga[a];for(d=0;d<g.length;d++)if(f=g[d].name,!("kinetic"===f&&"kinetic"!==b||b&&f!==b)){if(g.splice(d,1),0===g.length){delete this.ga[a];break}d--}},xc:function(a,b,d){this.T(a+"Change",{fk:b,ak:d})},Bk:function(a){var b=this.ag();return c.Rd(b),c.Ye(this,a),this.Qa("id",a),this},Dk:function(a){return c.Sd(this.getName(),this.j),c.Ze(this,a),this.Qa("name",a),this},
D:function(){var a=Array.prototype.slice.call(arguments),b=a[0],a=a[1],d=this["set"+c.g.fb(b)];return c.g.Fb(d)?d.call(this,a):this.Qa(b,a),this},Qa:function(a,b){var d;void 0!==b&&(d=this.h[a],this.h[a]=b,this.xc(a,d,b))},ai:function(a,b,d){var f;void 0!==d&&(f=this.h[a],f||(this.h[a]=this.Rc(a)),this.h[a][b]=d,this.xc(a,f,d))},K:function(a,b,d){var f=!0;b&&"Shape"===this.nodeType&&(b.target=this);"mouseenter"===a&&d&&this.j===d.j?f=!1:"mouseleave"===a&&d&&this.j===d.j&&(f=!1);f&&(this.T(a,b),b&&
!b.cancelBubble&&this.parent&&(d&&d.parent?this.K.call(this.parent,a,b,d.parent):this.K.call(this.parent,a,b)))},T:function(a,b){var d,f=this.ga[a];if(b.type=a,f)for(d=0;d<f.length;d++)f[d].tg.call(this,b)},A:function(){return this.Ba(),this.Jb(),this}});c.Node.create=function(a,b){return this.zd(JSON.parse(a),b)};c.Node.zd=function(a,b){var d,f,g;d=c.Node.prototype.Sc.call(a);var k=a.children;if(b&&(a.h.ee=b),d=new c[d](a.h),k)for(f=k.length,g=0;f>g;g++)d.add(this.zd(k[g]));return d};c.a.ma(c.Node,
"position");c.a.b(c.Node,"x",0);c.a.b(c.Node,"y",0);c.a.b(c.Node,"opacity",1);c.a.ib(c.Node,"name");c.a.ma(c.Node,"name");c.a.ib(c.Node,"id");c.a.ma(c.Node,"id");c.a.b(c.Node,"rotation",0);c.a.fa(c.Node,"scale",["x","y"]);c.a.b(c.Node,"scaleX",1);c.a.b(c.Node,"scaleY",1);c.a.fa(c.Node,"skew",["x","y"]);c.a.b(c.Node,"skewX",0);c.a.b(c.Node,"skewY",0);c.a.fa(c.Node,"offset",["x","y"]);c.a.b(c.Node,"offsetX",0);c.a.b(c.Node,"offsetY",0);c.a.Vb(c.Node,"dragDistance");c.a.ma(c.Node,"dragDistance");c.a.Vb(c.Node,
"width",0);c.a.ma(c.Node,"width");c.a.Vb(c.Node,"height",0);c.a.ma(c.Node,"height");c.a.b(c.Node,"listening","inherit");c.a.b(c.Node,"filters",void 0,function(a){return this.gb=!1,a});c.a.b(c.Node,"visible","inherit");c.a.b(c.Node,"transformsEnabled","all");c.a.ma(c.Node,"size");c.a.Wb(c.Node,{uk:"rotate",Fk:"setRotation",Aj:"getRotation"});c.m.u(c.Node)})();c.S.Ah=function(b){var a,e=b.data,d=e.length;for(b=0;d>b;b+=4)a=.34*e[b]+.5*e[b+1]+.16*e[b+2],e[b]=a,e[b+1]=a,e[b+2]=a};
c.S.sh=function(b){var a=255*this.ni(),e=b.data,d=e.length;for(b=0;d>b;b+=4)e[b]+=a,e[b+1]+=a,e[b+2]+=a};c.a.b(c.Node,"brightness",0,null,c.a.L);c.S.Dh=function(b){var a=b.data,e=a.length;for(b=0;e>b;b+=4)a[b]=255-a[b],a[b+1]=255-a[b+1],a[b+2]=255-a[b+2]};
(function(){function b(){this.za=this.X=this.Y=this.r=0;this.next=null}var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,
367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,
310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],e=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];c.S.qh=function(d){var f=Math.round(this.mi());if(0<f){var g,k,h,l,m,n,p,r,q,t,v,u,w,z,A,D,B,y,E,K,J,F,I,C=d.data,ca=d.width;d=d.height;g=f+f+1;
var za=ca-1,Ca=d-1,N=f+1,da=N*(N+1)/2,qa=new b,Da=null,G=qa;I=h=null;var ea=a[f],fa=e[f];for(h=1;g>h;h++)G=G.next=new b,h==N&&(Da=G);G.next=qa;for(k=n=m=0;d>k;k++){A=D=B=y=p=r=q=t=0;v=N*(E=C[m]);u=N*(K=C[m+1]);w=N*(J=C[m+2]);z=N*(F=C[m+3]);p+=da*E;r+=da*K;q+=da*J;t+=da*F;G=qa;for(h=0;N>h;h++)G.r=E,G.Y=K,G.X=J,G.za=F,G=G.next;for(h=1;N>h;h++)l=m+((h>za?za:h)<<2),p+=(G.r=E=C[l])*(I=N-h),r+=(G.Y=K=C[l+1])*I,q+=(G.X=J=C[l+2])*I,t+=(G.za=F=C[l+3])*I,A+=E,D+=K,B+=J,y+=F,G=G.next;h=qa;I=Da;for(g=0;ca>g;g++)C[m+
3]=F=t*ea>>fa,0!==F?(F=255/F,C[m]=(p*ea>>fa)*F,C[m+1]=(r*ea>>fa)*F,C[m+2]=(q*ea>>fa)*F):C[m]=C[m+1]=C[m+2]=0,p-=v,r-=u,q-=w,t-=z,v-=h.r,u-=h.Y,w-=h.X,z-=h.za,l=n+((l=g+f+1)<za?l:za)<<2,A+=h.r=C[l],D+=h.Y=C[l+1],B+=h.X=C[l+2],y+=h.za=C[l+3],p+=A,r+=D,q+=B,t+=y,h=h.next,v+=E=I.r,u+=K=I.Y,w+=J=I.X,z+=F=I.za,A-=E,D-=K,B-=J,y-=F,I=I.next,m+=4;n+=ca}for(g=0;ca>g;g++){D=B=y=A=r=q=t=p=0;m=g<<2;v=N*(E=C[m]);u=N*(K=C[m+1]);w=N*(J=C[m+2]);z=N*(F=C[m+3]);p+=da*E;r+=da*K;q+=da*J;t+=da*F;G=qa;for(h=0;N>h;h++)G.r=
E,G.Y=K,G.X=J,G.za=F,G=G.next;l=ca;for(h=1;f>=h;h++)m=l+g<<2,p+=(G.r=E=C[m])*(I=N-h),r+=(G.Y=K=C[m+1])*I,q+=(G.X=J=C[m+2])*I,t+=(G.za=F=C[m+3])*I,A+=E,D+=K,B+=J,y+=F,G=G.next,Ca>h&&(l+=ca);m=g;h=qa;I=Da;for(k=0;d>k;k++)l=m<<2,C[l+3]=F=t*ea>>fa,0<F?(F=255/F,C[l]=(p*ea>>fa)*F,C[l+1]=(r*ea>>fa)*F,C[l+2]=(q*ea>>fa)*F):C[l]=C[l+1]=C[l+2]=0,p-=v,r-=u,q-=w,t-=z,v-=h.r,u-=h.Y,w-=h.X,z-=h.za,l=g+((l=k+N)<Ca?l:Ca)*ca<<2,p+=A+=h.r=C[l],r+=D+=h.Y=C[l+1],q+=B+=h.X=C[l+2],t+=y+=h.za=C[l+3],h=h.next,v+=E=I.r,u+=
K=I.Y,w+=J=I.X,z+=F=I.za,A-=E,D-=K,B-=J,y-=F,I=I.next,m+=ca}}};c.a.b(c.Node,"blurRadius",0,null,c.a.L)})();
(function(){function b(a,b,f){b=4*(f*a.width+b);f=[];return f.push(a.data[b++],a.data[b++],a.data[b++],a.data[b++]),f}function a(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}c.S.Fh=function(e){var d;d=this.threshold();var f=b(e,0,0),g=b(e,e.width-1,0),k=b(e,0,e.height-1),h=b(e,e.width-1,e.height-1);d=d||10;if(a(f,g)<d&&a(g,h)<d&&a(h,k)<d&&a(k,f)<d){f=[g,f,h,k];g=[0,0,0];for(k=0;k<f.length;k++)g[0]+=f[k][0],g[1]+=f[k][1],g[2]+=f[k][2];f=(g[0]/=f.length,g[1]/=
f.length,g[2]/=f.length,g);g=[];for(k=0;k<e.width*e.height;k++)g[k]=d>a(f,[e.data[4*k],e.data[4*k+1],e.data[4*k+2]])?0:255;d=g}else d=void 0;if(d){for(var f=e.width,g=e.height,k=[1,1,1,1,0,1,1,1,1],h=Math.round(Math.sqrt(k.length)),l=Math.floor(h/2),m=[],n=0;g>n;n++)for(var p=0;f>p;p++){for(var r=n*f+p,q=0,t=0;h>t;t++)for(var v=0;h>v;v++){var u=n+t-l,w=p+v-l;0<=u&&g>u&&0<=w&&f>w&&(q+=d[u*f+w]*k[t*h+v])}m[r]=2040===q?255:0}d=m;f=e.width;g=e.height;k=[1,1,1,1,1,1,1,1,1];h=Math.round(Math.sqrt(k.length));
l=Math.floor(h/2);m=[];for(n=0;g>n;n++)for(p=0;f>p;p++){r=n*f+p;for(t=q=0;h>t;t++)for(v=0;h>v;v++)u=n+t-l,w=p+v-l,0<=u&&g>u&&0<=w&&f>w&&(q+=d[u*f+w]*k[t*h+v]);m[r]=1020<=q?255:0}d=m;f=e.width;g=e.height;k=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9];h=Math.round(Math.sqrt(k.length));l=Math.floor(h/2);m=[];for(n=0;g>n;n++)for(p=0;f>p;p++){r=n*f+p;for(t=q=0;h>t;t++)for(v=0;h>v;v++)u=n+t-l,w=p+v-l,0<=u&&g>u&&0<=w&&f>w&&(q+=d[u*f+w]*k[t*h+v]);m[r]=q}d=m;for(f=0;f<e.width*e.height;f++)e.data[4*f+3]=d[f]}return e};
c.a.b(c.Node,"threshold",0,null,c.a.L)})();c.S.RGB=function(b){var a,e=b.data,d=e.length,f=this.red(),g=this.green(),k=this.blue();for(b=0;d>b;b+=4)a=(.34*e[b]+.5*e[b+1]+.16*e[b+2])/255,e[b]=a*f,e[b+1]=a*g,e[b+2]=a*k,e[b+3]=e[b+3]};c.a.b(c.Node,"red",0,function(b){return this.gb=!1,255<b?255:0>b?0:Math.round(b)});c.a.b(c.Node,"green",0,function(b){return this.gb=!1,255<b?255:0>b?0:Math.round(b)});c.a.b(c.Node,"blue",0,c.ea.ya,c.a.L);
c.S.Ch=function(b){var a,e,d,f,g;b=b.data;var k=b.length;a=Math.pow(2,this.value());var h=Math.pow(2,this.Ug()),l=Math.abs(this.wg()+360)%360;e=a*h*Math.cos(l*Math.PI/180);d=a*h*Math.sin(l*Math.PI/180);var h=.299*a+.701*e+.167*d,l=.587*a-.587*e+.33*d,m=.114*a-.114*e-.497*d,n=.299*a-.299*e-.328*d,p=.587*a+.413*e+.035*d,r=.114*a-.114*e+.293*d,q=.299*a-.3*e+1.25*d,t=.587*a-.586*e-1.05*d,v=.114*a+.886*e-.2*d;for(a=0;k>a;a+=4)e=b[a+0],d=b[a+1],f=b[a+2],g=b[a+3],b[a+0]=h*e+l*d+m*f,b[a+1]=n*e+p*d+r*f,b[a+
2]=q*e+t*d+v*f,b[a+3]=g};c.a.b(c.Node,"hue",0,null,c.a.L);c.a.b(c.Node,"saturation",0,null,c.a.L);c.a.b(c.Node,"value",0,null,c.a.L);c.a.b(c.Node,"hue",0,null,c.a.L);c.a.b(c.Node,"saturation",0,null,c.a.L);c.a.b(c.Node,"luminance",0,null,c.a.L);
c.S.Bh=function(b){var a,e,d,f,g;b=b.data;var k=b.length,h=Math.pow(2,this.Ug()),l=Math.abs(this.wg()+360)%360,m=127*this.Vj();a=1*h*Math.cos(l*Math.PI/180);e=1*h*Math.sin(l*Math.PI/180);var h=.299+.701*a+.167*e,l=.587-.587*a+.33*e,n=.114-.114*a-.497*e,p=.299-.299*a-.328*e,r=.587+.413*a+.035*e,q=.114-.114*a+.293*e,t=.299-.3*a+1.25*e,v=.587-.586*a-1.05*e,u=.114+.886*a-.2*e;for(a=0;k>a;a+=4)e=b[a+0],d=b[a+1],f=b[a+2],g=b[a+3],b[a+0]=h*e+l*d+n*f+m,b[a+1]=p*e+r*d+q*f+m,b[a+2]=t*e+v*d+u*f+m,b[a+3]=g};
c.S.yh=function(b){var a=10*this.Di(),e=255*this.Ei(),d=this.Ci(),f=this.Bi(),g=0,k=0,h=b.data,l=b.width;b=b.height;var m=4*l,n=b;switch(d){case "top-left":k=g=-1;break;case "top":g=-1;k=0;break;case "top-right":g=-1;k=1;break;case "right":g=0;k=1;break;case "bottom-right":k=g=1;break;case "bottom":g=1;k=0;break;case "bottom-left":g=1;k=-1;break;case "left":g=0,k=-1}do{var d=(n-1)*m,p=g;1>n+p&&(p=0);n+p>b&&(p=0);var p=(n-1+p)*l*4,r=l;do{var q=d+4*(r-1),t=k;1>r+t&&(t=0);r+t>l&&(t=0);var t=p+4*(r-1+
t),v=h[q+1]-h[t+1],u=h[q+2]-h[t+2],t=h[q]-h[t],w=0<t?t:-t,z=0<u?u:-u;((0<v?v:-v)>w&&(t=v),z>w&&(t=u),t*=a,f)?(v=h[q]+t,u=h[q+1]+t,t=h[q+2]+t,h[q]=255<v?255:0>v?0:v,h[q+1]=255<u?255:0>u?0:u,h[q+2]=255<t?255:0>t?0:t):(t=e-t,0>t?t=0:255<t&&(t=255),h[q]=h[q+1]=h[q+2]=t)}while(--r)}while(--n)};c.a.b(c.Node,"embossStrength",.5,null,c.a.L);c.a.b(c.Node,"embossWhiteLevel",.5,null,c.a.L);c.a.b(c.Node,"embossDirection","top-left",null,c.a.L);c.a.b(c.Node,"embossBlend",!1,null,c.a.L);
(function(){function b(a,b,d,f,g){var k;d=d-b;g=g-f;return 0===d?f+g/2:0===g?f:(k=(a-b)/d,g*k+f)}c.S.zh=function(a){var e,d=a.data,f=d.length,g=d[0],k=g,h=d[1],l=h,m=d[2],n=m,p=this.Fi();if(0!==p){for(a=0;f>a;a+=4)e=d[a+0],g>e?g=e:e>k&&(k=e),e=d[a+1],h>e?h=e:e>l&&(l=e),e=d[a+2],m>e?m=e:e>n&&(n=e);k===g&&(k=255,g=0);l===h&&(l=255,h=0);n===m&&(n=255,m=0);var r,q,t,v,u,w,z,A,D;0<p?(q=k+p*(255-k),t=g-p*(g-0),u=l+p*(255-l),w=h-p*(h-0),A=n+p*(255-n),D=m-p*(m-0)):(r=.5*(k+g),q=k+p*(k-r),t=g+p*(g-r),v=.5*
(l+h),u=l+p*(l-v),w=h+p*(h-v),z=.5*(n+m),A=n+p*(n-z),D=m+p*(m-z));for(a=0;f>a;a+=4)d[a+0]=b(d[a+0],g,k,t,q),d[a+1]=b(d[a+1],h,l,w,u),d[a+2]=b(d[a+2],m,n,D,A)}};c.a.b(c.Node,"enhance",0,null,c.a.L)})();c.S.Ih=function(b){var a;a=Math.round(254*this.Tj())+1;b=b.data;var e=b.length,d=255/a;for(a=0;e>a;a+=1)b[a]=Math.floor(b[a]/d)*d};c.a.b(c.Node,"levels",.5,null,c.a.L);
c.S.Gh=function(b){var a;a=255*this.bk();b=b.data;var e=b.length,d=a/2;for(a=0;e>a;a+=4)b[a+0]+=d-2*d*Math.random(),b[a+1]+=d-2*d*Math.random(),b[a+2]+=d-2*d*Math.random()};c.a.b(c.Node,"noise",.2,null,c.a.L);
c.S.Hh=function(b){var a,e,d,f,g,k,h,l,m,n,p,r,q,t,v=Math.ceil(this.pk()),u=b.width,w=b.height,z=Math.ceil(u/v),A=Math.ceil(w/v);b=b.data;for(r=0;z>r;r+=1)for(q=0;A>q;q+=1){h=k=g=f=0;l=r*v;m=l+v;n=q*v;p=n+v;t=0;for(a=l;m>a;a+=1)if(!(a>=u))for(e=n;p>e;e+=1)e>=w||(d=4*(u*e+a),f+=b[d+0],g+=b[d+1],k+=b[d+2],h+=b[d+3],t+=1);f/=t;g/=t;k/=t;for(a=l;m>a;a+=1)if(!(a>=u))for(e=n;p>e;e+=1)e>=w||(d=4*(u*e+a),b[d+0]=f,b[d+1]=g,b[d+2]=k,b[d+3]=h)}};c.a.b(c.Node,"pixelSize",8,null,c.a.L);
c.S.Oh=function(b){var a=255*this.threshold(),e=b.data,d=e.length;for(b=0;d>b;b+=1)e[b]=e[b]<a?0:255};c.a.b(c.Node,"threshold",.5,null,c.a.L);c.S.Jh=function(b){var a,e,d,f,g,k,h,l=b.data,m=b.width,n=b.height,p=4*m;do{b=(n-1)*p;a=m;do e=b+4*(a-1),d=l[e],f=l[e+1],g=l[e+2],k=.393*d+.769*f+.189*g,h=.349*d+.686*f+.168*g,d=.272*d+.534*f+.131*g,l[e]=255<k?255:k,l[e+1]=255<h?255:h,l[e+2]=255<d?255:d,l[e+3]=l[e+3];while(--a)}while(--n)};
c.S.Kh=function(b){var a=b.data,e=b.width,d=4*e;b=b.height;do{var f=(b-1)*d,g=e;do{var k=f+4*(g-1),h=a[k],l=a[k+1],m=a[k+2];127<h&&(h=255-h);127<l&&(l=255-l);127<m&&(m=255-m);a[k]=h;a[k+1]=l;a[k+2]=m}while(--g)}while(--b)};
(function(){var b=c.g.pb();c.S.Eh=function(a){var e,d,f,g,k,h,l,m,n=a.width,p=a.height,r=Math.round(this.Sj()),q=Math.round(this.Rj());g=Math.floor(q%360*n/360);if(!(1>r)){b.width=n;b.height=p;var q=b.getContext("2d").getImageData(0,0,n,p),t,v,u;e=a.data;d=q.data;var w=a.width;f=a.height;k=n/2||w/2;h=p/2||f/2;var z=v=0,A=0,D=0,B=Math.sqrt(k*k+h*h);t=w-k;v=f-h;u=Math.sqrt(t*t+v*v);var B=u>B?u:B,y,E;m=360/w*Math.PI/180;for(y=0;w>y;y+=1)for(E=Math.sin(y*m),l=Math.cos(y*m),u=0;f>u;u+=1)t=Math.floor(k+
B*u/f*l),v=Math.floor(h+B*u/f*E),t=4*(v*w+t),v=e[t+0],z=e[t+1],A=e[t+2],D=e[t+3],t=4*(y+u*w),d[t+0]=v,d[t+1]=z,d[t+2]=A,d[t+3]=D;for(w=n/Math.pow(2,r);8>=w;)w*=2,--r;B=w=Math.ceil(w);u=0;y=B;E=1;g+w>n&&(u=B,y=0,E=-1);for(d=0;p>d;d+=1)for(e=u;e!==y;e+=E)f=Math.round(e+g)%n,l=4*(n*d+f),f=q.data[l+0],k=q.data[l+1],h=q.data[l+2],l=q.data[l+3],m=4*(n*d+e),q.data[m+0]=f,q.data[m+1]=k,q.data[m+2]=h,q.data[m+3]=l;for(d=0;p>d;d+=1)for(B=Math.floor(w),g=0;r>g;g+=1){for(e=0;B+1>e;e+=1)l=4*(n*d+e),f=q.data[l+
0],k=q.data[l+1],h=q.data[l+2],l=q.data[l+3],m=4*(n*d+2*B-e-1),q.data[m+0]=f,q.data[m+1]=k,q.data[m+2]=h,q.data[m+3]=l;B*=2}f={Ng:0};n=q.data;a=a.data;p=q.width;q=q.height;r=f.qk||p/2;g=f.rk||q/2;u=B=h=k=0;e=Math.sqrt(r*r+g*g);d=p-r;w=q-g;d=Math.sqrt(d*d+w*w);e=d>e?d:e;f=f.Ng||0;for(d=0;p>d;d+=1)for(w=0;q>w;w+=1)h=d-r,B=w-g,k=Math.sqrt(h*h+B*B)*q/e,h=(180*Math.atan2(B,h)/Math.PI+360+f)%360,h=h*p/360,h=Math.floor(h),k=Math.floor(k),y=4*(k*p+h),k=n[y+0],h=n[y+1],B=n[y+2],u=n[y+3],y=4*(w*p+d),a[y+0]=
k,a[y+1]=h,a[y+2]=B,a[y+3]=u}};c.a.b(c.Node,"kaleidoscopePower",2,null,c.a.L);c.a.b(c.Node,"kaleidoscopeAngle",0,null,c.a.L)})();
(function(){function b(a){c.root.setTimeout(a,1E3/60)}function a(){d.apply(c.root,arguments)}var e=function(){return c.root.performance&&c.root.performance.now?function(){return c.root.performance.now()}:function(){return(new Date).getTime()}}(),d=c.root.requestAnimationFrame||c.root.webkitRequestAnimationFrame||c.root.mozRequestAnimationFrame||c.root.oRequestAnimationFrame||c.root.msRequestAnimationFrame||b;c.R=function(a,b){var d=c.R;this.Pc=a;this.Me(b);this.id=d.Nb++;this.frame={time:0,hc:0,dd:e()}};
c.R.prototype={Me:function(a){var b=[];this.De=b=a?0<a.length?a:[a]:[]},cg:function(){return this.De},bd:function(){var a,b=c.R.ob,d=b.length;for(a=0;d>a;a++)if(b[a].id===this.id)return!0;return!1},start:function(){var a=c.R;this.stop();this.frame.hc=0;this.frame.dd=e();a.u(this)},stop:function(){c.R.sa(this)},Bf:function(a){this.frame.hc=a-this.frame.dd;this.frame.dd=a;this.frame.time+=this.frame.hc;this.frame.Ji=1E3/this.frame.hc}};c.R.ob=[];c.R.Nb=0;c.R.Kc=!1;c.R.u=function(a){this.ob.push(a);
this.of()};c.R.sa=function(a){var b=a.id,d=this.ob,f=d.length;for(a=0;f>a;a++)if(d[a].id===b){this.ob.splice(a,1);break}};c.R.Ua=function(){var a,b,d,f,m,n,p,r,q={},t=this.ob;for(f=0;f<t.length;f++){a=t[f];b=a.De;d=a.Pc;a.Bf(e());n=b.length;for(m=0;n>m;m++)p=b[m],void 0!==p.j&&(q[p.j]=p);d&&d.call(a,a.frame)}for(r in q)q[r].A()};c.R.ud=function(){var b=c.R;b.ob.length?(a(b.ud),b.Ua()):b.Kc=!1};c.R.of=function(){this.Kc||(this.Kc=!0,this.ud())};var f=c.Node.prototype.moveTo;c.Node.prototype.moveTo=
function(a){f.call(this,a)}})((0,eval)("this"));
(function(){function b(a,b,e,k,h,l,m){this.Og=b;this.$d=k;this.duration=l;this.yd=0;this.kc=m;this.Fc=this.la=0;this.Pc=e;this.yd=h-this.$d;this.pause()}var a={node:1,duration:1,je:1,Da:1,kc:1},e=0;c.N=function(d){var f,g=this,k=d.node,h=k.j,l=d.duration||1,m=d.je||c.yb.We,n=!!d.kc;this.node=k;this.j=e++;this.ra=new c.R(function(){g.qa.jd()},k.M());this.qa=new b(0,function(a){g.Af(a)},m,0,1,1E3*l,n);this.qc();c.N.h[h]||(c.N.h[h]={});c.N.h[h][this.j]||(c.N.h[h][this.j]={});c.N.u[h]||(c.N.u[h]={});
for(f in d)void 0===a[f]&&this.Xe(f,d[f]);this.reset();this.Da=d.Da;this.fc=d.fc};c.N.h={};c.N.u={};c.N.prototype={Xe:function(a,b){var e,k,h,l;e=this.node;var m=e.j;if(k=c.N.u[m][a],k&&delete c.N.h[m][k][a],e=e.Rc(a),c.g.Bc(b))for(k=[],l=b.length,h=0;l>h;h++)k.push(b[h]-e[h]);else k=b-e;c.N.h[m][this.j][a]={start:e,Kf:k};c.N.u[m][a]=this.j},Af:function(a){var b,e,k,h,l,m,n,p=this.node,r=c.N.h[p.j][this.j];for(b in r){if(e=r[b],k=e.start,h=e.Kf,c.g.Bc(k))for(l=[],n=k.length,m=0;n>m;m++)l.push(k[m]+
h[m]*a);else l=k+h*a;p.D(b,l)}},qc:function(){var a=this;this.qa.ik=function(){a.ra.start()};this.qa.jk=function(){a.ra.start()};this.qa.hk=function(){a.ra.stop()};this.qa.Da=function(){a.Da&&a.Da()};this.qa.fc=function(){a.fc&&a.fc()}},play:function(){return this.qa.play(),this},reverse:function(){return this.qa.reverse(),this},reset:function(){this.node;return this.qa.reset(),this},seek:function(a){this.node;return this.qa.seek(1E3*a),this},pause:function(){return this.qa.pause(),this},finish:function(){this.node;
return this.qa.finish(),this},P:function(){var a,b=this.node.j,e=this.j,k=c.N.u[b];this.pause();for(a in k)delete c.N.u[b][a];delete c.N.h[b][e]}};b.prototype={ha:function(a){(a=this[a])&&a()},setTime:function(a){a>this.duration?this.kc?(this.la=this.duration,this.reverse()):this.finish():0>a?this.kc?(this.la=0,this.play()):this.reset():(this.la=a,this.update())},setPosition:function(a){this.Og(a)},Ta:function(a){return void 0===a&&(a=this.la),this.Pc(a,this.$d,this.yd,this.duration)},play:function(){this.state=
2;this.Fc=this.Vc()-this.la;this.jd();this.ha("onPlay")},reverse:function(){this.state=3;this.la=this.duration-this.la;this.Fc=this.Vc()-this.la;this.jd();this.ha("onReverse")},seek:function(a){this.pause();this.la=a;this.update();this.ha("onSeek")},reset:function(){this.pause();this.la=0;this.update();this.ha("onReset")},finish:function(){this.pause();this.la=this.duration;this.update();this.ha("onFinish")},update:function(){this.setPosition(this.Ta(this.la))},jd:function(){var a=this.Vc()-this.Fc;
2===this.state?this.setTime(a):3===this.state&&this.setTime(this.duration-a)},pause:function(){this.state=1;this.ha("onPause")},Vc:function(){return(new Date).getTime()}};c.yb={nh:function(a,b,e,k){return e*(a/=k)*a*(2.70158*a-1.70158)+b},ph:function(a,b,e,k){return e*((a=a/k-1)*a*(2.70158*a+1.70158)+1)+b},oh:function(a,b,e,k){var h=1.70158;return 1>(a/=k/2)?e/2*a*a*(((h*=1.525)+1)*a-h)+b:e/2*((a-=2)*a*(((h*=1.525)+1)*a+h)+2)+b},vh:function(a,b,e,k,h,l){var m=0;return 0===a?b:1==(a/=k)?b+e:(l||(l=
.3*k),!h||h<Math.abs(e)?(h=e,m=l/4):m=l/(2*Math.PI)*Math.asin(e/h),-(h*Math.pow(2,10*--a)*Math.sin(2*(a*k-m)*Math.PI/l))+b)},xh:function(a,b,e,k,h,l){var m=0;return 0===a?b:1==(a/=k)?b+e:(l||(l=.3*k),!h||h<Math.abs(e)?(h=e,m=l/4):m=l/(2*Math.PI)*Math.asin(e/h),h*Math.pow(2,-10*a)*Math.sin(2*(a*k-m)*Math.PI/l)+e+b)},wh:function(a,b,e,k,h,l){var m=0;return 0===a?b:2==(a/=k/2)?b+e:(l||(l=.3*k*1.5),!h||h<Math.abs(e)?(h=e,m=l/4):m=l/(2*Math.PI)*Math.asin(e/h),1>a?-.5*h*Math.pow(2,10*--a)*Math.sin(2*(a*
k-m)*Math.PI/l)+b:h*Math.pow(2,-10*--a)*Math.sin(2*(a*k-m)*Math.PI/l)*.5+e+b)},td:function(a,b,e,k){return(a/=k)<1/2.75?7.5625*e*a*a+b:2/2.75>a?e*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?e*(7.5625*(a-=2.25/2.75)*a+.9375)+b:e*(7.5625*(a-=2.625/2.75)*a+.984375)+b},Re:function(a,b,e,k){return e-c.yb.td(k-a,0,e,k)+b},rh:function(a,b,e,k){return k/2>a?.5*c.yb.Re(2*a,0,e,k)+b:.5*c.yb.td(2*a-k,0,e,k)+.5*e+b},Te:function(a,b,e,k){return e*(a/=k)*a+b},uh:function(a,b,e,k){return-e*(a/=k)*(a-2)+b},th:function(a,
b,e,k){return 1>(a/=k/2)?e/2*a*a+b:-e/2*(--a*(a-2)-1)+b},Lh:function(a,b,e,k){return e*(a/=k)*a*a*a*a+b},Nh:function(a,b,e,k){return e*((a=a/k-1)*a*a*a*a+1)+b},Mh:function(a,b,e,k){return 1>(a/=k/2)?e/2*a*a*a*a*a+b:e/2*((a-=2)*a*a*a*a+2)+b},We:function(a,b,e,k){return e*a/k+b}}})();
(function(){c.aa={ra:new c.R,pa:!1,offset:{x:0,y:0},node:null,Ad:function(a){var b=c.aa,f=b.node;if(f){if(!b.pa){var g=f.Z().Ea;if(f.Yb()>Math.max(Math.abs(g.x-b.ah.x),Math.abs(g.y-b.ah.y)))return}f.xf(a);b.pa||(b.pa=!0,f.ha("dragstart",{type:"dragstart",target:f,v:a},!0));f.ha("dragmove",{type:"dragmove",target:f,v:a},!0)}},uc:function(a){var b,f=c.aa,g=f.node;g&&(b=g.M(),f.ra.stop(),f.pa&&(f.pa=!1,c.Ma=!1,a&&(a.Nf=g)),delete f.node,(b||g).A())},tc:function(a){a=a||{};var b=a.Nf;a&&b&&b.ha("dragend",
{type:"dragend",target:b,v:a},!0)}};c.Node.prototype.xf=function(a){var b=c.aa,f=this.Z().Ea,g=this.Yi();f&&(b={x:f.x-b.offset.x,y:f.y-b.offset.y},void 0!==g&&(b=g.call(this,b,a)),this.Le(b))};c.Node.prototype.bh=function(){var a=c.aa,b={};a.uc(b);a.tc(b)};var b=c.Node.prototype.P;c.Node.prototype.P=function(){var a=c.aa;a.node&&a.node.j===this.j&&this.bh();b.call(this)};c.Node.prototype.pa=function(){var a=c.aa;return a.node&&a.node.j===this.j&&a.pa};c.a.b(c.Node,"dragBoundFunc");c.a.ib(c.Node,"draggable",
!1);c.a.ma(c.Node,"draggable");var a=c.document.documentElement;a.addEventListener("mouseup",c.aa.uc,!0);a.addEventListener("touchend",c.aa.uc,!0);a.addEventListener("mouseup",c.aa.tc,!1);a.addEventListener("touchend",c.aa.tc,!1)})();
c.g.Sa(c.I,{pc:function(b){this.children=new c.m;c.Node.call(this,b)},O:function(b){if(b){var a=new c.m;return this.children.rb(function(e){b(e)&&a.push(e)}),a}return this.children},Xc:function(){return 0<this.O().length},Sg:function(){for(var b,a=c.m.sa(this.children),e=0;e<a.length;e++)b=a[e],delete b.parent,b.index=0,b.Xc()&&b.Sg(),b.remove();return this.children=new c.m,this},qb:function(){for(var b,a=c.m.sa(this.children),e=0;e<a.length;e++)b=a[e],delete b.parent,b.index=0,b.P();return this.children=
new c.m,this},add:function(b){if(!(1<arguments.length)){if(b.getParent())return void b.moveTo(this);var a=this.children;return this.Ub(b),b.index=a.length,b.parent=this,a.push(b),this.T("add",{Gf:b}),this}for(a=0;a<arguments.length;a++)this.add(arguments[a])},P:function(){this.Xc()&&this.qb();c.Node.prototype.P.call(this)},find:function(b){var a,e,d,f,g=[],k=b.replace(/ /g,"").split(","),h=k.length;for(b=0;h>b;b++)if(e=k[b],"#"===e.charAt(0))(a=this.hf(e.slice(1)))&&g.push(a);else if("."===e.charAt(0))a=
this.jf(e.slice(1)),g=g.concat(a);else for(d=this.O(),f=d.length,a=0;f>a;a++)g=g.concat(d[a].Db(e));return c.m.sa(g)},hf:function(b){b=c.$c[b];return void 0!==b&&this.Be(b)?b:null},jf:function(b){return this.gf(c.names[b]||[])},Db:function(b){for(var a=c.Node.prototype.Db.call(this,b),e=this.O(),d=e.length,f=0;d>f;f++)a=a.concat(e[f].Db(b));return a},jc:function(){var b=c.Node.prototype.jc.call(this);b.children=[];for(var a=this.O(),e=a.length,d=0;e>d;d++)b.children.push(a[d].jc());return b},gf:function(b){for(var a=
[],e=b.length,d=0;e>d;d++){var f=b[d];this.Be(f)&&a.push(f)}return a},Be:function(b){for(b=b.getParent();b;){if(b.j===this.j)return!0;b=b.getParent()}return!1},clone:function(b){var a=c.Node.prototype.clone.call(this,b);return this.O().rb(function(b){a.add(b.clone())}),a},Mi:function(b){var a=[];return this.find("Shape").rb(function(e){e.ec()&&e.yg(b)&&a.push(e)}),a},nb:function(){this.children.rb(function(b,a){b.index=a})},Ba:function(b,a){var e=this.M(),d=(e=b||e&&e.w())&&e.getContext(),f=this.ca.canvas,
f=f&&f.Ke;return this.ec()&&(f?this.Cd(d):this.Dd(e,"drawScene",a)),this},Jb:function(b,a){var e=this.M(),d=(e=b||e&&e.oa)&&e.getContext(),f=this.ca.canvas,f=f&&f.dc;return this.od()&&(f?this.Bd(d):this.Dd(e,"drawHit",a)),this},Dd:function(b,a,e){var d,f,g=this.M(),k=b&&b.getContext(),h=this.Qi(),l=this.Pi(),m=h&&l;m&&g&&(d=this.Ri(),f=this.Si(),k.save(),g.eb(this,k),k.beginPath(),k.rect(d,f,h,l),k.clip(),k.reset());this.children.rb(function(d){d[a](b,e)});m&&k.restore()}});c.g.extend(c.I,c.Node);
c.I.prototype.get=c.I.prototype.find;c.a.fa(c.I,"clip",["x","y","width","height"]);c.a.b(c.I,"clipX");c.a.b(c.I,"clipY");c.a.b(c.I,"clipWidth");c.a.b(c.I,"clipHeight");c.m.u(c.I);
(function(){function b(a){a.fill()}function a(a){a.stroke()}function e(a){a.fill()}function d(a){a.stroke()}function f(){this.mb(g)}var g="hasShadow";c.g.Sa(c.f,{pc:function(g){this.nodeType="Shape";this.wc=b;this.Hc=a;this.Gd=e;this.Vd=d;for(var h,l=c.nd;h=c.g.ig(),!h||h in l;);this.Xb=h;l[h]=this;c.Node.call(this,g);this.G("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",f)},Xc:function(){return!1},O:function(){return[]},
getContext:function(){return this.M().getContext()},w:function(){return this.M().w()},cc:function(){return this.Pa(g,this.qf)},qf:function(){return this.Bj()&&0!==this.ng()&&!!(this.mg()||this.lg()||this.Dj()||this.Ej())},vg:function(){return!!(this.aj()||this.qe()||this.pe()||this.re())},Mb:function(){return!!(this.stroke()||this.gh()||this.fh()||this.eh())},Db:function(a){return this.className===a||this.nodeType===a?[this]:[]},yg:function(a){var b,d=this.Z().be;return d.getContext().clear(),this.Ba(d),
b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,0<b[3]},P:function(){c.Node.prototype.P.call(this);delete c.nd[this.Xb]},Ic:function(){return(this.cc()||1!==this.sb())&&this.vg()&&this.Mb()&&this.Z()},Ba:function(a,b){var d,e,f,g=this.M(),r=(a||g.w()).getContext(),q=this.ca.canvas,t=this.W(),v=this.cc();return this.ec()&&(q?this.Cd(r):t&&(r.save(),this.Ic()?(d=this.Z(),e=d.ae,f=e.getContext(),f.clear(),f.save(),f.sc(this),g.eb(this,f,b),t.call(this,f),f.restore(),v&&(r.save(),r.xd(this),
r.drawImage(e.i,0,0),r.restore()),r.wd(this),r.drawImage(e.i,0,0)):(r.sc(this),g.eb(this,r,b),v&&(r.save(),r.xd(this),t.call(this,r),r.restore()),r.wd(this),t.call(this,r)),r.restore())),this},Jb:function(a,b){var d=this.M(),f=(a||d.oa).getContext(),e=this.Zc()||this.W(),g=this.ca.canvas,g=g&&g.dc;return this.od()&&(g?this.Bd(f):e&&(f.save(),f.sc(this),d.eb(this,f,b),e.call(this,f),f.restore())),this},yi:function(a){var b,d,f,e,g,r,q,t;a=a||0;var v=this.ca.canvas,u=this.Ld(),w=u.getContext(),v=v.dc.getContext(),
z=u.C(),u=u.F();v.clear();try{b=w.getImageData(0,0,z,u);d=b.data;f=v.getImageData(0,0,z,u);e=f.data;g=d.length;r=c.g.Nd(this.Xb);for(q=0;g>q;q+=4)t=d[q+3],t>a&&(e[q]=r.r,e[q+1]=r.Y,e[q+2]=r.X,e[q+3]=255);v.putImageData(f,0,0)}catch(A){c.g.warn("Unable to draw hit graph from cached scene canvas. "+A.message)}return this}});c.g.extend(c.f,c.Node);c.a.b(c.f,"stroke");c.a.b(c.f,"strokeRed",0,c.ea.ya);c.a.b(c.f,"strokeGreen",0,c.ea.ya);c.a.b(c.f,"strokeBlue",0,c.ea.ya);c.a.b(c.f,"strokeAlpha",1,c.ea.Jc);
c.a.b(c.f,"strokeWidth",2);c.a.b(c.f,"lineJoin");c.a.b(c.f,"lineCap");c.a.b(c.f,"sceneFunc");c.a.b(c.f,"hitFunc");c.a.b(c.f,"dash");c.a.b(c.f,"shadowColor");c.a.b(c.f,"shadowRed",0,c.ea.ya);c.a.b(c.f,"shadowGreen",0,c.ea.ya);c.a.b(c.f,"shadowBlue",0,c.ea.ya);c.a.b(c.f,"shadowAlpha",1,c.ea.Jc);c.a.b(c.f,"shadowBlur");c.a.b(c.f,"shadowOpacity");c.a.fa(c.f,"shadowOffset",["x","y"]);c.a.b(c.f,"shadowOffsetX",0);c.a.b(c.f,"shadowOffsetY",0);c.a.b(c.f,"fillPatternImage");c.a.b(c.f,"fill");c.a.b(c.f,"fillRed",
0,c.ea.ya);c.a.b(c.f,"fillGreen",0,c.ea.ya);c.a.b(c.f,"fillBlue",0,c.ea.ya);c.a.b(c.f,"fillAlpha",1,c.ea.Jc);c.a.b(c.f,"fillPatternX",0);c.a.b(c.f,"fillPatternY",0);c.a.b(c.f,"fillLinearGradientColorStops");c.a.b(c.f,"fillRadialGradientStartRadius",0);c.a.b(c.f,"fillRadialGradientEndRadius",0);c.a.b(c.f,"fillRadialGradientColorStops");c.a.b(c.f,"fillPatternRepeat","repeat");c.a.b(c.f,"fillEnabled",!0);c.a.b(c.f,"strokeEnabled",!0);c.a.b(c.f,"shadowEnabled",!0);c.a.b(c.f,"dashEnabled",!0);c.a.b(c.f,
"strokeScaleEnabled",!0);c.a.b(c.f,"fillPriority","color");c.a.fa(c.f,"fillPatternOffset",["x","y"]);c.a.b(c.f,"fillPatternOffsetX",0);c.a.b(c.f,"fillPatternOffsetY",0);c.a.fa(c.f,"fillPatternScale",["x","y"]);c.a.b(c.f,"fillPatternScaleX",1);c.a.b(c.f,"fillPatternScaleY",1);c.a.fa(c.f,"fillLinearGradientStartPoint",["x","y"]);c.a.b(c.f,"fillLinearGradientStartPointX",0);c.a.b(c.f,"fillLinearGradientStartPointY",0);c.a.fa(c.f,"fillLinearGradientEndPoint",["x","y"]);c.a.b(c.f,"fillLinearGradientEndPointX",
0);c.a.b(c.f,"fillLinearGradientEndPointY",0);c.a.fa(c.f,"fillRadialGradientStartPoint",["x","y"]);c.a.b(c.f,"fillRadialGradientStartPointX",0);c.a.b(c.f,"fillRadialGradientStartPointY",0);c.a.fa(c.f,"fillRadialGradientEndPoint",["x","y"]);c.a.b(c.f,"fillRadialGradientEndPointX",0);c.a.b(c.f,"fillRadialGradientEndPointY",0);c.a.b(c.f,"fillPatternRotation",0);c.a.Wb(c.f,{ui:"dash",Xi:"getDash",xk:"getDash",xi:"sceneFunc",Zi:"getSceneFunc",yk:"setSceneFunc",zi:"hitFunc",$i:"getHitFunc",zk:"setHitFunc"});
c.m.u(c.f)})();
(function(){function b(b,d){b.content.addEventListener(d,function(e){b[a+d](e)},!1)}var a="_",e="mousedown mousemove mouseup mouseout touchstart touchmove touchend mouseover".split(" "),d=e.length;c.g.Sa(c.Bb,{s:function(a){this.nodeType="Stage";c.I.call(this,a);this.j=c.Ae++;this.af();this.$e();c.pd.push(this)},Ub:function(a){"Layer"!==a.nodeType&&c.g.error("You may only add layers to the stage.")},wk:function(a){if("string"===typeof a){var b=a;if(a=c.document.getElementById(a),!a)throw"Can not find container in document with id "+b;
}return this.Qa("container",a),this},od:function(){return!0},A:function(){return c.Node.prototype.A.call(this),this},$:function(a){return c.Node.prototype.$.call(this,a),this.Ec(),this},da:function(a){return c.Node.prototype.da.call(this,a),this.Ec(),this},clear:function(){var a,b=this.children,d=b.length;for(a=0;d>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.ee=c.document.createElement("div"),c.I.prototype.clone.call(this,a)},P:function(){var a=this.content;c.I.prototype.P.call(this);
a&&c.g.Pd(a)&&this.Yf().removeChild(a);a=c.pd.indexOf(this);-1<a&&c.pd.splice(a,1)},yj:function(){return this.Ea},Z:function(){return this},Ui:function(){return this.content},toDataURL:function(a){function b(l){var m=r[l].toDataURL(),v=new c.window.Image;v.onload=function(){p.drawImage(v,0,0);l<r.length-1?b(l+1):a.Lc(n.toDataURL(d,e))};v.src=m}a=a||{};var d=a.Ig||null,e=a.Pg||null,l=a.x||0,m=a.y||0,n=new c.Ga({width:a.width||this.C(),height:a.height||this.F(),ia:1}),p=n.getContext().o,r=this.children;
(l||m)&&p.translate(-1*l,-1*m);b(0)},jh:function(a){var b=a.Lc;a.Lc=function(a){c.g.zc(a,function(a){b(a)})};this.toDataURL(a)},La:function(a){var b,d,e=this.O();for(b=e.length-1;0<=b;b--)if(d=e[b].La(a))return d;return null},Ec:function(){if(this.content){var a,b,d=this.C(),e=this.F(),l=this.O(),m=l.length;this.content.style.width=d+"px";this.content.style.height=e+"px";this.ae.Fa(d,e);this.be.Fa(d,e);for(a=0;m>a;a++)b=l[a],b.w().Fa(d,e),b.oa.Fa(d,e),b.A()}},add:function(a){if(!(1<arguments.length))return c.I.prototype.add.call(this,
a),a.Td(this.width(),this.height()),a.A(),this.content.appendChild(a.canvas.i),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},M:function(){return null},cg:function(){return this.O()},$e:function(){for(var a=0;d>a;a++)b(this,e[a])},Vh:function(a){c.bb.ub||(this.Ra(a),this.T("contentMouseover",{v:a}))},Uh:function(a){if(!c.bb.ub){this.Ra(a);var b=this.ja;b&&!c.pa()&&(b.K("mouseout",{v:a}),b.K("mouseleave",{v:a}),this.ja=null);this.Ea=void 0;this.T("contentMouseout",
{v:a})}},Th:function(a){if(!c.bb.ub){this.Ra(a);var b=c.aa,d=this.La(this.Ea);d&&d.Ca()?c.pa()||this.ja&&this.ja.j===d.j?d.K("mousemove",{v:a}):(this.ja&&(this.ja.K("mouseout",{v:a},d),this.ja.K("mouseleave",{v:a},d)),d.K("mouseover",{v:a},this.ja),d.K("mouseenter",{v:a},this.ja),this.ja=d):this.ja&&!c.pa()&&(this.ja.K("mouseout",{v:a}),this.ja.K("mouseleave",{v:a}),this.ja=null);this.T("contentMousemove",{v:a});b&&b.Ad(a)}a.preventDefault&&a.preventDefault()},Sh:function(a){if(!c.bb.ub){this.Ra(a);
var b=this.La(this.Ea);c.Ma=!0;b&&b.Ca()&&(this.Hf=b,b.K("mousedown",{v:a}));this.T("contentMousedown",{v:a})}a.preventDefault&&a.preventDefault()},Wh:function(a){if(!c.bb.ub){this.Ra(a);var b=this.La(this.Ea),d=this.Hf,e=!1;c.Va?(e=!0,c.Va=!1):c.Va=!0;setTimeout(function(){c.Va=!1},c.he);b&&b.Ca()&&(b.K("mouseup",{v:a}),c.Ma&&d&&d.j===b.j&&(b.K("click",{v:a}),e&&b.K("dblclick",{v:a})));this.T("contentMouseup",{v:a});c.Ma&&(this.T("contentClick",{v:a}),e&&this.T("contentDblclick",{v:a}));c.Ma=!1}a.preventDefault&&
a.preventDefault()},ei:function(a){this.Ra(a);var b=this.La(this.Ea);c.Ma=!0;b&&b.Ca()&&(this.hh=b,b.K("touchstart",{v:a}),b.Ca()&&a.preventDefault&&a.preventDefault());this.T("contentTouchstart",{v:a})},ci:function(a){this.Ra(a);var b=this.La(this.Ea),d=!1;c.Va?(d=!0,c.Va=!1):c.Va=!0;setTimeout(function(){c.Va=!1},c.he);b&&b.Ca()&&(b.K("touchend",{v:a}),c.Ma&&b.j===this.hh.j&&(b.K("tap",{v:a}),d&&b.K("dbltap",{v:a})),b.Ca()&&a.preventDefault&&a.preventDefault());c.Ma&&(this.T("contentTouchend",{v:a}),
d&&this.T("contentDbltap",{v:a}));c.Ma=!1},di:function(a){this.Ra(a);var b=c.aa,d=this.La(this.Ea);d&&d.Ca()&&(d.K("touchmove",{v:a}),d.Ca()&&a.preventDefault&&a.preventDefault());this.T("contentTouchmove",{v:a});b&&b.Ad(a)},Ra:function(a){var b,d=this.ff(),e=a.offsetX,l=a.clientX,m=null,n=null;a=a?a:window.event;void 0!==a.touches?0<a.touches.length&&(b=a.touches[0],m=b.clientX-d.left,n=b.clientY-d.top):void 0!==e?(m=e,n=a.offsetY):"mozilla"===c.bb.Ef?(m=a.layerX,n=a.layerY):void 0!==l&&d&&(m=l-
d.left,n=a.clientY-d.top);null!==m&&null!==n&&(this.Ea={x:m,y:n})},ff:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},af:function(){var a=this.Yf();if(!a){if(c.g.Ag())throw"Stage has not container. But container is required";a=c.document.createElement("div")}a.innerHTML="";this.content=c.document.createElement("div");this.content.style.position="relative";this.content.style.display="inline-block";this.content.className=
"kineticjs-content";this.content.setAttribute("role","presentation");a.appendChild(this.content);this.ae=new c.Ga({ia:1});this.be=new c.Rb;this.Ec()},Yh:function(a,b){var d,e,l=a.split(" "),m=l.length;for(d=0;m>d;d++)e=l[d],this.content.addEventListener(e,b,!1)},cache:function(){c.g.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},ce:function(){}});c.g.extend(c.Bb,c.I);c.a.ib(c.Bb,"container");c.a.ma(c.Bb,"container")})();
c.g.Sa(c.Oa,{s:function(b){this.nodeType="Layer";c.I.call(this,b)},Jf:function(){return this.canvas.i.Jf()},w:function(){return this.canvas},sj:function(){return this.oa},getContext:function(){return this.w().getContext()},clear:function(b){return this.getContext().clear(b),this.oa.getContext().clear(b),this},vb:function(b){c.Node.prototype.vb.call(this,b);var a=this.Z();return a&&(a.content.removeChild(this.w().i),b<a.O().length-1?a.content.insertBefore(this.w().i,a.O()[b+1].w().i):a.content.appendChild(this.w().i)),
this},Ge:function(){c.Node.prototype.Ge.call(this);var b=this.Z();b&&(b.content.removeChild(this.w().i),b.content.appendChild(this.w().i))},He:function(){if(c.Node.prototype.He.call(this)){var b=this.Z();b&&(b.content.removeChild(this.w().i),this.index<b.O().length-1?b.content.insertBefore(this.w().i,b.O()[this.index+1].w().i):b.content.appendChild(this.w().i))}},Ee:function(){if(c.Node.prototype.Ee.call(this)){var b=this.Z();if(b){var a=b.O();b.content.removeChild(this.w().i);b.content.insertBefore(this.w().i,
a[this.index+1].w().i)}}},Fe:function(){if(c.Node.prototype.Fe.call(this)){var b=this.Z();if(b){var a=b.O();b.content.removeChild(this.w().i);b.content.insertBefore(this.w().i,a[1].w().i)}}},M:function(){return this},remove:function(){var b=this.w().i;return c.Node.prototype.remove.call(this),b&&b.parentNode&&c.g.Pd(b)&&b.parentNode.removeChild(b),this},Z:function(){return this.parent}});c.g.extend(c.Oa,c.I);c.a.b(c.Oa,"clearBeforeDraw",!0);c.m.u(c.Oa);
c.g.Sa(c.$a,{Cb:function(b){this.nodeType="Layer";this.canvas=new c.Ga;this.oa=new c.Rb;c.Oa.call(this,b)},Td:function(b,a){this.canvas.Fa(b,a);this.oa.Fa(b,a)},Ub:function(b){b=b.nodeType;"Group"!==b&&"Shape"!==b&&c.g.error("You may only add groups and shapes to a layer.")},La:function(){return null},Rh:function(b){var a,e;b=this.oa.context.o.getImageData(b.x,b.y,1,1).data;var d=b[3];return 255===d?(a=c.g.wf(b[0],b[1],b[2]),e=c.nd["#"+a],{shape:e}):0<d?{hi:!0}:{}},Ba:function(b,a){var e=this.M(),
e=b||e&&e.w();return this.T("beforeDraw",{node:this}),this.ne()&&e.getContext().clear(),c.I.prototype.Ba.call(this,e,a),this.T("draw",{node:this}),this},eb:function(b,a,e){b=b.Qc(e).c;a.transform(b[0],b[1],b[2],b[3],b[4],b[5])},Jb:function(b,a){var e=this.M(),d=b||e&&e.oa;return e&&e.ne()&&e.oa.getContext().clear(),c.I.prototype.Jb.call(this,d,a),this},clear:function(b){return this.getContext().clear(b),this.oa.getContext().clear(b),this},Qb:function(b){return c.Node.prototype.Qb.call(this,b),b?(this.w().i.style.display=
"block",this.oa.i.style.display="block"):(this.w().i.style.display="none",this.oa.i.style.display="none"),this},Pf:function(){return this.Vg(!0),this},Mf:function(){return this.Vg(!1),this}});c.g.extend(c.$a,c.Oa);c.a.b(c.$a,"hitGraphEnabled",!0);c.m.u(c.$a);
c.g.Sa(c.lc,{Cb:function(b){this.nodeType="Layer";this.canvas=new c.Ga;c.Oa.call(this,b)},Ub:function(b){"Shape"!==b.nodeType&&c.g.error("You may only add shapes to a fast layer.")},Td:function(b,a){this.canvas.Fa(b,a)},Nj:function(){return!1},La:function(){return null},Ba:function(b){var a=this.M();b=b||a&&a.w();return this.ne()&&b.getContext().clear(),c.I.prototype.Ba.call(this,b),this},eb:function(b,a,e){e&&e.j===this.j||(b=b.we().c,a.transform(b[0],b[1],b[2],b[3],b[4],b[5]))},A:function(){return this.Ba(),
this},clear:function(b){return this.getContext().clear(b),this},Qb:function(b){return c.Node.prototype.Qb.call(this,b),this.w().i.style.display=b?"block":"none",this}});c.g.extend(c.lc,c.Oa);c.m.u(c.lc);c.g.Sa(c.J,{s:function(b){this.nodeType="Group";c.I.call(this,b)},Ub:function(b){b=b.nodeType;"Group"!==b&&"Shape"!==b&&c.g.error("You may only add groups and shapes to groups.")}});c.g.extend(c.J,c.I);c.m.u(c.J);c.Rect=function(b){this.s(b)};
c.Rect.prototype={s:function(b){c.f.call(this,b);this.className="Rect";this.W(this.B)},B:function(b){var a=this.Vi(),e=this.C(),d=this.F();b.beginPath();a?(b.moveTo(a,0),b.lineTo(e-a,0),b.arc(e-a,a,a,3*Math.PI/2,0,!1),b.lineTo(e,d-a),b.arc(e-a,d-a,a,0,Math.PI/2,!1),b.lineTo(a,d),b.arc(a,d-a,a,Math.PI/2,Math.PI,!1),b.lineTo(0,a),b.arc(a,a,a,Math.PI,3*Math.PI/2,!1)):b.rect(0,0,e,d);b.closePath();b.V(this)}};c.g.extend(c.Rect,c.f);c.a.b(c.Rect,"cornerRadius",0);c.m.u(c.Rect);
(function(){var b=2*Math.PI-1E-4;c.wb=function(a){this.s(a)};c.wb.prototype={s:function(a){c.f.call(this,a);this.className="Circle";this.W(this.B)},B:function(a){a.beginPath();a.arc(0,0,this.tb(),0,b,!1);a.closePath();a.V(this)},C:function(){return 2*this.tb()},F:function(){return 2*this.tb()},da:function(a){c.Node.prototype.da.call(this,a);this.md(a/2)},$:function(a){c.Node.prototype.$.call(this,a);this.md(a/2)}};c.g.extend(c.wb,c.f);c.a.b(c.wb,"radius",0);c.m.u(c.wb)})();
(function(){var b=2*Math.PI-1E-4;c.kb=function(a){this.s(a)};c.kb.prototype={s:function(a){c.f.call(this,a);this.className="Ellipse";this.W(this.B)},B:function(a){var e=this.tb(),d=e.x,e=e.y;a.beginPath();a.save();d!==e&&a.scale(1,e/d);a.arc(0,0,d,0,b,!1);a.restore();a.closePath();a.V(this)},C:function(){return 2*this.tb().x},F:function(){return 2*this.tb().y},da:function(a){c.Node.prototype.da.call(this,a);this.md({x:a/2})},$:function(a){c.Node.prototype.$.call(this,a);this.md({y:a/2})}};c.g.extend(c.kb,
c.f);c.a.fa(c.kb,"radius",["x","y"]);c.a.b(c.kb,"radiusX",0);c.a.b(c.kb,"radiusY",0);c.m.u(c.kb)})();
(function(){var b=2*Math.PI-1E-4;c.Ab=function(a){this.s(a)};c.Ab.prototype={s:function(a){c.f.call(this,a);this.className="Ring";this.W(this.B)},B:function(a){a.beginPath();a.arc(0,0,this.bg(),0,b,!1);a.moveTo(this.$b(),0);a.arc(0,0,this.$b(),b,0,!0);a.closePath();a.V(this)},C:function(){return 2*this.$b()},F:function(){return 2*this.$b()},da:function(a){c.Node.prototype.da.call(this,a);this.Wg(a/2)},$:function(a){c.Node.prototype.$.call(this,a);this.Wg(a/2)}};c.g.extend(c.Ab,c.f);c.a.b(c.Ab,"innerRadius",
0);c.a.b(c.Ab,"outerRadius",0);c.m.u(c.Ab)})();c.cb=function(b){this.s(b)};c.cb.prototype={s:function(b){c.f.call(this,b);this.className="Wedge";this.W(this.B)},B:function(b){b.beginPath();b.arc(0,0,this.tb(),0,c.Lb(this.Lb()),this.Ti());b.lineTo(0,0);b.closePath();b.V(this)}};c.g.extend(c.cb,c.f);c.a.b(c.cb,"radius",0);c.a.b(c.cb,"angle",0);c.a.b(c.cb,"clockwise",!1);c.a.Wb(c.cb,{Zd:"angle",Oi:"getAngle",vk:"setAngle"});c.m.u(c.cb);Math.PI/180;c.Ya=function(b){this.s(b)};
c.Ya.prototype={s:function(b){c.f.call(this,b);this.className="Arc";this.W(this.B)},B:function(b){var a=c.Lb(this.gi()),e=this.oi();b.beginPath();b.arc(0,0,this.$b(),0,a,e);b.arc(0,0,this.bg(),a,0,!e);b.closePath();b.V(this)}};c.g.extend(c.Ya,c.f);c.a.b(c.Ya,"innerRadius",0);c.a.b(c.Ya,"outerRadius",0);c.a.b(c.Ya,"angle",0);c.a.b(c.Ya,"clockwise",!1);c.m.u(c.Ya);c.Image=function(b){this.s(b)};
c.Image.prototype={s:function(b){c.f.call(this,b);this.className="Image";this.W(this.B);this.Zc(this.Eb)},Ic:function(){return(this.cc()||1!==this.sb())&&this.Mb()},B:function(b){var a,e,d,f,g=this.C(),k=this.F(),h=this.Tc();h&&(a=this.Wi(),e=a.width,d=a.height,f=e&&d?[h,a.x,a.y,e,d,0,0,g,k]:[h,0,0,g,k]);b.beginPath();b.rect(0,0,g,k);b.closePath();b.V(this);h&&b.drawImage.apply(b,f)},Eb:function(b){var a=this.C(),e=this.F();b.beginPath();b.rect(0,0,a,e);b.closePath();b.V(this)},C:function(){var b=
this.Tc();return this.h.width||(b?b.width:0)},F:function(){var b=this.Tc();return this.h.height||(b?b.height:0)}};c.g.extend(c.Image,c.f);c.a.b(c.Image,"image");c.a.fa(c.Image,"crop",["x","y","width","height"]);c.a.b(c.Image,"cropX",0);c.a.b(c.Image,"cropY",0);c.a.b(c.Image,"cropWidth",0);c.a.b(c.Image,"cropHeight",0);c.m.u(c.Image);
(function(){function b(a){a.fillText(this.Pb,0,0)}function a(a){a.strokeText(this.Pb,0,0)}var e="fontFamily fontSize fontStyle fontVariant padding align lineHeight text width height wrap".split(" "),d=e.length,f=c.g.pb().getContext("2d");c.Text=function(a){this.s(a)};c.Text.prototype={s:function(f){void 0===f.width&&(f.width="auto");void 0===f.height&&(f.height="auto");c.f.call(this,f);this.wc=b;this.Hc=a;this.className="Text";for(f=0;d>f;f++)this.G(e[f]+"Change.kinetic",this.Gb);this.Gb();this.W(this.B);
this.Zc(this.Eb)},B:function(a){var b,d=this.Uc();b=this.rd;var e=this.te()*b,f=this.qd,n=f.length,p=this.C();a.D("font",this.hb());a.D("textBaseline","middle");a.D("textAlign","left");a.save();a.translate(d,0);a.translate(0,d+b/2);for(b=0;n>b;b++){var r=f[b],q=r.text,r=r.width;a.save();"right"===this.Vf()?a.translate(p-r-2*d,0):"center"===this.Vf()&&a.translate((p-r-2*d)/2,0);this.Pb=q;a.V(this);a.restore();a.translate(0,e)}a.restore()},Eb:function(a){var b=this.C(),d=this.F();a.beginPath();a.rect(0,
0,b,d);a.closePath();a.V(this)},Xa:function(a){return this.Qa("text",c.g.Dc(a)?a:a.toString()),this},C:function(){return"auto"===this.h.width?this.Pe+2*this.Uc():this.h.width},F:function(){return"auto"===this.h.height?this.rd*this.qd.length*this.te()+2*this.Uc():this.h.height},Ac:function(a){var b,d=this.se();return f.save(),f.font=this.hb(),b=f.measureText(a),f.restore(),{width:b.width,height:parseInt(d,10)}},hb:function(){return this.pj()+" "+this.qj()+" "+this.se()+"px "+this.oj()},rc:function(a,
b){return this.qd.push({text:a,width:b})},Tb:function(a){return f.measureText(a).width},Gb:function(){var a=this.bc().split("\n"),b=+this.se(),d=0,e=this.te()*b,m=this.h.width,n=this.h.height,p="auto"!==m,r="auto"!==n,q=this.Uc(),m=m-2*q,n=n-2*q,q=0,t=this.Jj(),v="none"!==t,t="char"!==t&&v;this.qd=[];f.save();f.font=this.hb();for(var u=0,w=a.length;w>u;++u){var z=a[u],A=this.Tb(z);if(p&&A>m)for(;0<z.length;){for(var D=0,B=z.length,y="",E=0;B>D;){var K=D+B>>>1,J=z.slice(0,K+1),F=this.Tb(J);m>=F?(D=
K+1,y=J,E=F):B=K}if(!y)break;t&&(B=Math.max(y.lastIndexOf(" "),y.lastIndexOf("-"))+1,0<B&&(D=B,y=y.slice(0,D),E=this.Tb(y)));if(this.rc(y,E),d=Math.max(d,E),q+=e,!v||r&&q+e>n)break;if(z=z.slice(D),0<z.length&&(A=this.Tb(z),m>=A)){this.rc(z,A);q+=e;d=Math.max(d,A);break}}else this.rc(z,A),q+=e,d=Math.max(d,A);if(r&&q+e>n)break}f.restore();this.rd=b;this.Pe=d}};c.g.extend(c.Text,c.f);c.a.b(c.Text,"fontFamily","Arial");c.a.b(c.Text,"fontSize",12);c.a.b(c.Text,"fontStyle","normal");c.a.b(c.Text,"fontVariant",
"normal");c.a.b(c.Text,"padding",0);c.a.b(c.Text,"align","left");c.a.b(c.Text,"lineHeight",1);c.a.b(c.Text,"wrap","word");c.a.ib(c.Text,"text","");c.a.ma(c.Text,"text");c.m.u(c.Text)})();c.ba=function(b){this.s(b)};
c.ba.prototype={s:function(b){c.f.call(this,b);this.className="Line";this.G("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this.mb("tensionPoints")});this.W(this.B)},B:function(b){var a,e,d,f=this.ac(),g=f.length;a=this.ve();var k=this.Xf();if(b.beginPath(),b.moveTo(f[0],f[1]),0!==a&&4<g){a=this.sg();e=a.length;d=k?0:4;for(k||b.quadraticCurveTo(a[0],a[1],a[2],a[3]);e-2>d;)b.bezierCurveTo(a[d++],a[d++],a[d++],a[d++],a[d++],a[d++]);k||b.quadraticCurveTo(a[e-2],a[e-1],f[g-
2],f[g-1])}else for(d=2;g>d;d+=2)b.lineTo(f[d],f[d+1]);k?(b.closePath(),b.V(this)):b.Ne(this)},sg:function(){return this.Pa("tensionPoints",this.lf)},lf:function(){return this.Xf()?this.mf():c.g.Ed(this.ac(),this.ve())},mf:function(){var b=this.ac(),a=b.length,e=this.ve(),d=c.g,f=d.yc(b[a-2],b[a-1],b[0],b[1],b[2],b[3],e),d=d.yc(b[a-4],b[a-3],b[a-2],b[a-1],b[0],b[1],e),e=c.g.Ed(b,e);return[f[2],f[3]].concat(e).concat([d[0],d[1],b[a-2],b[a-1],d[2],d[3],f[0],f[1],b[0],b[1]])}};c.g.extend(c.ba,c.f);
c.a.b(c.ba,"closed",!1);c.a.b(c.ba,"tension",0);c.a.b(c.ba,"points");c.m.u(c.ba);c.Ha=function(b){this.s(b)};
c.Ha.prototype={s:function(b){c.f.call(this,b);this.className="Sprite";this.ra=new c.R;this.G("animationChange.kinetic",function(){this.Zb(0)});this.G("frameRateChange.kinetic",function(){this.ra.bd()&&(clearInterval(this.interval),this.Ud())});this.W(this.B);this.Zc(this.Eb)},B:function(b){var a=this.le(),e=4*this.Zb(),d=this.me()[a],a=d[e+0],f=d[e+1],g=d[e+2],e=d[e+3];(d=this.Tc())&&b.drawImage(d,a,f,g,e,0,0,g,e)},Eb:function(b){var a=this.le(),e=4*this.Zb(),d=this.me()[a],a=d[e+2],e=d[e+3];b.beginPath();
b.rect(0,0,a,e);b.closePath();b.Uf(this)},Ic:function(){return(this.cc()||1!==this.sb())&&this.Mb()},Ud:function(){var b=this;this.interval=setInterval(function(){b.Cf()},1E3/this.rj())},start:function(){var b=this.M();this.ra.Me(b);this.Ud();this.ra.start()},stop:function(){this.ra.stop();clearInterval(this.interval)},bd:function(){return this.ra.bd()},Cf:function(){var b=this.Zb(),a=this.le(),a=this.me()[a].length/4;this.Zb(a-1>b?b+1:0)}};c.g.extend(c.Ha,c.f);c.a.b(c.Ha,"animation");
c.a.b(c.Ha,"animations");c.a.b(c.Ha,"image");c.a.b(c.Ha,"frameIndex",0);c.a.b(c.Ha,"frameRate",17);c.a.Wb(c.Ha,{index:"frameIndex",tj:"getFrameIndex",Ck:"setFrameIndex"});c.m.u(c.Ha);c.H=function(b){this.s(b)};
c.H.prototype={s:function(b){this.jb=[];var a=this;c.f.call(this,b);this.className="Path";this.jb=c.H.Ua(this.getData());this.G("dataChange.kinetic",function(){a.jb=c.H.Ua(this.getData())});this.W(this.B)},B:function(b){var a=this.jb,e=!1;b.beginPath();for(var d=0;d<a.length;d++){var f=a[d].l;switch(a[d].Aa){case "L":b.lineTo(f[0],f[1]);break;case "M":b.moveTo(f[0],f[1]);break;case "C":b.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case "Q":b.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case "A":var g=
f[0],k=f[1],h=f[2],l=f[3],m=f[4],n=f[5],p=f[6],f=f[7],r=h>l?h:l,q=h>l?1:h/l,h=h>l?l/h:1;b.translate(g,k);b.rotate(p);b.scale(q,h);b.arc(0,0,r,m,m+n,1-f);b.scale(1/q,1/h);b.rotate(-p);b.translate(-g,-k);break;case "z":b.closePath(),e=!0}}e?b.V(this):b.Ne(this)}};c.g.extend(c.H,c.f);c.H.ua=function(b,a,e,d){return Math.sqrt((e-b)*(e-b)+(d-a)*(d-a))};
c.H.Ce=function(b,a,e,d,f,g,k){void 0===g&&(g=a);void 0===k&&(k=e);var h=(f-e)/(d-a+1E-8),l=Math.sqrt(b*b/(1+h*h));a>d&&(l*=-1);var m=h*l;if(d===a)a={x:g,y:k+m};else if((k-e)/(g-a+1E-8)===h)a={x:g+l,y:k+m};else{m=this.ua(a,e,d,f);if(1E-8>m)return;l=((g-a)*(d-a)+(k-e)*(f-e))/(m*m);m=a+l*(d-a);e+=l*(f-e);g=this.ua(g,k,m,e);b=Math.sqrt(b*b-g*g);l=Math.sqrt(b*b/(1+h*h));a>d&&(l*=-1);a={x:m+l,y:e+h*l}}return a};
c.H.Nb=function(b,a,e,d,f,g,k,h,l){return{x:h*b*b*b+3*g*b*b*(1-b)+3*d*b*(1-b)*(1-b)+a*(1-b)*(1-b)*(1-b),y:l*b*b*b+3*k*b*b*(1-b)+3*f*b*(1-b)*(1-b)+e*(1-b)*(1-b)*(1-b)}};c.H.cd=function(b,a,e,d,f,g,k){return{x:g*b*b+2*d*b*(1-b)+a*(1-b)*(1-b),y:k*b*b+2*f*b*(1-b)+e*(1-b)*(1-b)}};c.H.sa=function(b,a,e,d,f,g){var k=Math.cos(g);g=Math.sin(g);e=e*Math.cos(f);d=d*Math.sin(f);return{x:b+(e*k-d*g),y:a+(e*g+d*k)}};
c.H.Ua=function(b){if(!b)return[];var a,e="mMlLvVhHzZcCqQtTsSaA".split("");a=b.replace(RegExp(" ","g"),",");for(b=0;b<e.length;b++)a=a.replace(new RegExp(e[b],"g"),"|"+e[b]);e=a.split("|");a=[];var d=0,f=0;for(b=1;b<e.length;b++){var g=e[b],k=g.charAt(0),g=g.slice(1),g=g.replace(RegExp(",-","g"),"-"),g=g.replace(RegExp("-","g"),",-"),g=g.replace(RegExp("e,-","g"),"e-"),g=g.split(",");0<g.length&&""===g[0]&&g.shift();for(var h=0;h<g.length;h++)g[h]=parseFloat(g[h]);for(;0<g.length&&!isNaN(g[0]);){var l,
m,n,p,r,q,t,v;l=null;p=[];var h=d,u=f;switch(k){case "l":d+=g.shift();f+=g.shift();l="L";p.push(d,f);break;case "L":d=g.shift();f=g.shift();p.push(d,f);break;case "m":k=g.shift();m=g.shift();if(d+=k,f+=m,l="M",2<a.length&&"z"===a[a.length-1].Aa)for(n=a.length-2;0<=n;n--)if("M"===a[n].Aa){d=a[n].l[0]+k;f=a[n].l[1]+m;break}p.push(d,f);k="l";break;case "M":d=g.shift();f=g.shift();l="M";p.push(d,f);k="L";break;case "h":d+=g.shift();l="L";p.push(d,f);break;case "H":d=g.shift();l="L";p.push(d,f);break;
case "v":f+=g.shift();l="L";p.push(d,f);break;case "V":f=g.shift();l="L";p.push(d,f);break;case "C":p.push(g.shift(),g.shift(),g.shift(),g.shift());d=g.shift();f=g.shift();p.push(d,f);break;case "c":p.push(d+g.shift(),f+g.shift(),d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();l="C";p.push(d,f);break;case "S":m=d;n=f;l=a[a.length-1];"C"===l.Aa&&(m=d+(d-l.l[2]),n=f+(f-l.l[3]));p.push(m,n,g.shift(),g.shift());d=g.shift();f=g.shift();l="C";p.push(d,f);break;case "s":m=d;n=f;l=a[a.length-1];"C"===
l.Aa&&(m=d+(d-l.l[2]),n=f+(f-l.l[3]));p.push(m,n,d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();l="C";p.push(d,f);break;case "Q":p.push(g.shift(),g.shift());d=g.shift();f=g.shift();p.push(d,f);break;case "q":p.push(d+g.shift(),f+g.shift());d+=g.shift();f+=g.shift();l="Q";p.push(d,f);break;case "T":m=d;n=f;l=a[a.length-1];"Q"===l.Aa&&(m=d+(d-l.l[0]),n=f+(f-l.l[1]));d=g.shift();f=g.shift();l="Q";p.push(m,n,d,f);break;case "t":m=d;n=f;l=a[a.length-1];"Q"===l.Aa&&(m=d+(d-l.l[0]),n=f+(f-l.l[1]));d+=
g.shift();f+=g.shift();l="Q";p.push(m,n,d,f);break;case "A":p=g.shift();m=g.shift();n=g.shift();r=g.shift();q=g.shift();t=d;v=f;d=g.shift();f=g.shift();l="A";p=this.fe(t,v,d,f,r,q,p,m,n);break;case "a":p=g.shift(),m=g.shift(),n=g.shift(),r=g.shift(),q=g.shift(),t=d,v=f,d+=g.shift(),f+=g.shift(),l="A",p=this.fe(t,v,d,f,r,q,p,m,n)}a.push({Aa:l||k,l:p,start:{x:h,y:u},xa:this.Ff(h,u,l||k,p)})}"z"!==k&&"Z"!==k||a.push({Aa:"z",l:[],start:void 0,xa:0})}return a};
c.H.Ff=function(b,a,e,d){var f,g,k,h=c.H;switch(e){case "L":return h.ua(b,a,d[0],d[1]);case "C":e=0;f=h.Nb(0,b,a,d[0],d[1],d[2],d[3],d[4],d[5]);for(k=.01;1>=k;k+=.01)g=h.Nb(k,b,a,d[0],d[1],d[2],d[3],d[4],d[5]),e+=h.ua(f.x,f.y,g.x,g.y),f=g;return e;case "Q":e=0;f=h.cd(0,b,a,d[0],d[1],d[2],d[3]);for(k=.01;1>=k;k+=.01)g=h.cd(k,b,a,d[0],d[1],d[2],d[3]),e+=h.ua(f.x,f.y,g.x,g.y),f=g;return e;case "A":e=0;k=d[4];var l=d[5];b=d[4]+l;a=Math.PI/180;if(Math.abs(k-b)<a&&(a=Math.abs(k-b)),f=h.sa(d[0],d[1],d[2],
d[3],k,0),0>l)for(k=k-a;k>b;k-=a)g=h.sa(d[0],d[1],d[2],d[3],k,0),e+=h.ua(f.x,f.y,g.x,g.y),f=g;else for(k+=a;b>k;k+=a)g=h.sa(d[0],d[1],d[2],d[3],k,0),e+=h.ua(f.x,f.y,g.x,g.y),f=g;return g=h.sa(d[0],d[1],d[2],d[3],b,0),e+h.ua(f.x,f.y,g.x,g.y)}return 0};
c.H.fe=function(b,a,e,d,f,g,k,h,l){function m(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(n(a,b))}function n(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1])*Math.sqrt(b[0]*b[0]+b[1]*b[1]))}l=Math.PI/180*l;var p=Math.cos(l)*(b-e)/2+Math.sin(l)*(a-d)/2,r=-1*Math.sin(l)*(b-e)/2+Math.cos(l)*(a-d)/2,q=p*p/(k*k)+r*r/(h*h);1<q&&(k*=Math.sqrt(q),h*=Math.sqrt(q));q=Math.sqrt((k*k*h*h-k*k*r*r-h*h*p*p)/(k*k*r*r+h*h*p*p));f===g&&(q*=-1);isNaN(q)&&(q=0);f=q*k*r/h;q=q*-h*p/k;b=(b+e)/2+Math.cos(l)*
f-Math.sin(l)*q;a=(a+d)/2+Math.sin(l)*f+Math.cos(l)*q;d=m([1,0],[(p-f)/k,(r-q)/h]);e=[(p-f)/k,(r-q)/h];p=[(-1*p-f)/k,(-1*r-q)/h];r=m(e,p);return-1>=n(e,p)&&(r=Math.PI),1<=n(e,p)&&(r=0),0===g&&0<r&&(r-=2*Math.PI),1===g&&0>r&&(r+=2*Math.PI),[b,a,k,h,d,r,l,g]};c.a.b(c.H,"data");c.m.u(c.H);
(function(){function b(a){a.fillText(this.Pb,0,0)}function a(a){a.strokeText(this.Pb,0,0)}c.Ia=function(a){this.s(a)};c.Ia.prototype={s:function(e){var d=this;this.Of=c.g.pb();this.jb=[];c.f.call(this,e);this.wc=b;this.Hc=a;this.Gd=b;this.Vd=a;this.className="TextPath";this.jb=c.H.Ua(this.h.data);this.G("dataChange.kinetic",function(){d.jb=c.H.Ua(this.h.data)});this.G("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d.Gb);d.Gb();this.W(this.B)},B:function(a){a.D("font",this.hb());a.D("textBaseline",
"middle");a.D("textAlign","left");a.save();for(var b=this.xe,f=0;f<b.length;f++){a.save();var g=b[f].Mg;a.translate(g.x,g.y);a.rotate(b[f].rotation);this.Pb=b[f].text;a.V(this);a.restore()}a.restore()},Xa:function(a){c.Text.prototype.Xa.call(this,a)},Ac:function(a){var b=this.Of.getContext("2d");b.save();b.font=this.hb();a=b.measureText(a);return b.restore(),{width:a.width,height:parseInt(this.h.fontSize,10)}},Gb:function(){function a(e){e=b.Ac(e).width;var f=0,n=0;for(k=void 0;.01<Math.abs(e-f)/
e&&25>n;){n++;for(var p=f;void 0===h;){a:{m=0;for(var u=b.jb,w=l+1;w<u.length;w++){if(0<u[w].xa){h=(l=w,u[w]);break a}"M"==u[w].Aa&&(g={x:u[w].l[0],y:u[w].l[1]})}h={}}h&&p+h.xa<e&&(p+=h.xa,h=void 0)}if(h==={}||void 0===g)break;p=!1;switch(h.Aa){case "L":c.H.ua(g.x,g.y,h.l[0],h.l[1])>e?k=c.H.Ce(e,g.x,g.y,h.l[0],h.l[1],g.x,g.y):h=void 0;break;case "A":var u=h.l[4],w=h.l[5],z=h.l[4]+w;0===m?m=u+1E-8:e>f?m+=Math.PI/180*w/Math.abs(w):m-=Math.PI/360*w/Math.abs(w);(0>w&&z>m||0<=w&&m>z)&&(m=z,p=!0);k=c.H.sa(h.l[0],
h.l[1],h.l[2],h.l[3],m,h.l[6]);break;case "C":0===m?m=e>h.xa?1E-8:e/h.xa:e>f?m+=(e-f)/h.xa:m-=(f-e)/h.xa;1<m&&(m=1,p=!0);k=c.H.Nb(m,h.start.x,h.start.y,h.l[0],h.l[1],h.l[2],h.l[3],h.l[4],h.l[5]);break;case "Q":0===m?m=e/h.xa:e>f?m+=(e-f)/h.xa:m-=(f-e)/h.xa,1<m&&(m=1,p=!0),k=c.H.cd(m,h.start.x,h.start.y,h.l[0],h.l[1],h.l[2],h.l[3])}void 0!==k&&(f=c.H.ua(g.x,g.y,k.x,k.y));p&&(h=void 0)}}var b=this,f=this.Ac(this.h.text);this.Pe=f.width;this.rd=f.height;this.xe=[];for(var g,k,h,f=this.h.text.split(""),
l=-1,m=0,n=0;n<f.length&&(a(f[n]),void 0!==g&&void 0!==k);n++){var p=c.H.Ce(0+c.H.ua(g.x,g.y,k.x,k.y)/2,g.x,g.y,k.x,k.y);this.xe.push({Ok:p.x,Pk:p.y,text:f[n],rotation:Math.atan2(k.y-g.y,k.x-g.x),Mg:g,mk:k});g=k}}};c.Ia.prototype.hb=c.Text.prototype.hb;c.g.extend(c.Ia,c.f);c.a.b(c.Ia,"fontFamily","Arial");c.a.b(c.Ia,"fontSize",12);c.a.b(c.Ia,"fontStyle","normal");c.a.b(c.Ia,"fontVariant","normal");c.a.ib(c.Ia,"text","");c.m.u(c.Ia)})();c.zb=function(b){this.s(b)};
c.zb.prototype={s:function(b){c.f.call(this,b);this.className="RegularPolygon";this.W(this.B)},B:function(b){var a,e,d,f=this.h.Ik,g=this.h.Qg;b.beginPath();b.moveTo(0,0-g);for(a=1;f>a;a++)e=g*Math.sin(2*a*Math.PI/f),d=-1*g*Math.cos(2*a*Math.PI/f),b.lineTo(e,d);b.closePath();b.V(this)}};c.g.extend(c.zb,c.f);c.a.b(c.zb,"radius",0);c.a.b(c.zb,"sides",0);c.m.u(c.zb);c.lb=function(b){this.s(b)};
c.lb.prototype={s:function(b){c.f.call(this,b);this.className="Star";this.W(this.B)},B:function(b){var a=this.Oj(),e=this.lk(),d=this.ck();b.beginPath();b.moveTo(0,0-e);for(var f=1;2*d>f;f++){var g=0===f%2?e:a;b.lineTo(g*Math.sin(f*Math.PI/d),-1*g*Math.cos(f*Math.PI/d))}b.closePath();b.V(this)}};c.g.extend(c.lb,c.f);c.a.b(c.lb,"numPoints",5);c.a.b(c.lb,"innerRadius",0);c.a.b(c.lb,"outerRadius",0);c.m.u(c.lb);
(function(){var b="fontFamily fontSize fontStyle padding lineHeight text".split(" "),a=b.length;c.nc=function(a){this.Cb(a)};c.nc.prototype={Cb:function(a){var b=this;this.className="Label";c.J.call(this,a);this.G("add.kinetic",function(a){b.qc(a.Gf);b.Wd()})},bc:function(){return this.find("Text")[0]},rg:function(){return this.find("Tag")[0]},qc:function(e){function d(){g.Wd()}var f,g=this;for(f=0;a>f;f++)e.G(b[f]+"Change.kinetic",d)},C:function(){return this.bc().C()},F:function(){return this.bc().F()},
Wd:function(){var a,b,f,g,k,h,l,m=this.bc(),n=this.rg();if(m&&n){switch(a=m.C(),b=m.F(),f=n.fg(),g=n.hg(),l=n.gg(),k=0,h=0,f){case "up":k=a/2;h=-1*l;break;case "right":k=a+g;h=b/2;break;case "down":k=a/2;h=b+l;break;case "left":k=-1*g,h=b/2}n.kd({x:-1*k,y:-1*h,width:a,height:b});m.kd({x:-1*k,y:-1*h})}}};c.g.extend(c.nc,c.J);c.m.u(c.nc);c.ab=function(a){this.s(a)};c.ab.prototype={s:function(a){c.f.call(this,a);this.className="Tag";this.W(this.B)},B:function(a){var b=this.C(),f=this.F(),g=this.fg(),
k=this.hg(),h=this.gg();a.beginPath();a.moveTo(0,0);"up"===g&&(a.lineTo((b-k)/2,0),a.lineTo(b/2,-1*h),a.lineTo((b+k)/2,0));a.lineTo(b,0);"right"===g&&(a.lineTo(b,(f-h)/2),a.lineTo(b+k,f/2),a.lineTo(b,(f+h)/2));a.lineTo(b,f);"down"===g&&(a.lineTo((b+k)/2,f),a.lineTo(b/2,f+h),a.lineTo((b-k)/2,f));a.lineTo(0,f);"left"===g&&(a.lineTo(0,(f+h)/2),a.lineTo(-1*k,f/2),a.lineTo(0,(f-h)/2));a.closePath();a.V(this)}};c.g.extend(c.ab,c.f);c.a.b(c.ab,"pointerDirection","none");c.a.b(c.ab,"pointerWidth",0);c.a.b(c.ab,
"pointerHeight",0);c.a.b(c.ab,"cornerRadius",0);c.m.u(c.ab)})();var ka={},x=[],H=30,la=["grey","white","red"];function ma(b){return Object.keys(b).sort(function(a,b){return a-b})}var L={},M=.75*innerHeight,na=20/3;function oa(b){for(var a="";0<b--;)a+=" ";return a}var pa=oa(1),ra=oa(7),sa=oa(1),O=new c.Bb({ee:"container",width:window.innerWidth,height:window.innerHeight}),P=new c.$a({id:"main"}),Q=new c.$a({id:"haplo"}),ta=new c.$a({id:"marker_scale",x:0,y:0,width:100,height:M+20}),ua={};
function va(b){for(var a=b-1;a<b;a++)if(a in ua)return!0;for(a=b-5;a<b+5;a++)ua[a]=!0;return!1}function wa(b,a,e,d){d=d||0;var f=new c.ba({stroke:"black",U:2});e&&(f.h.shadowColor="black",f.h.shadowBlur=0,f.h.shadowOffsetY=-10/3,f.h.Hk=1);e=d||0;d=Math.floor((b.y+a.y)/2);f.ld([b.x,b.y,b.x,d+e,a.x,d+e,a.x,a.y]);return f}function xa(b){var a;b.fill=a||"white";b.stroke="black";b.U=2;b.ge=10;return new c.Rect(b)}function R(b){b.je=c.yb.Te;b.duration=.8;return new c.N(b)}
function ya(b,a){a=a||10;return new c.Rect({x:b.x-a-3,y:b.y-a-3,width:2*a+6,height:2*a+6,dh:.5,U:3,Kk:!1,stroke:"orange"})}function Aa(b,a,e,d){a=new c.J({x:0,y:a});var f=new c.Rect({x:0,y:0,width:90,height:20,fill:"grey",stroke:"black",U:2,ge:6});b=new c.Text({x:6,y:5,text:b,fontSize:10,fill:"white"});a.add(f);a.add(b);if(d){var g=new c.Rect({x:82,y:4,width:4,height:4,fill:"red"});a.add(g);var k=!0;a.G("click",function(){g.Ak(k?"green":"red");k=!k})}a.G("click",e);return a}
function Ba(){var b,a=max_pos.x-Ea,e=Fa;b=b||20;var d=b/2;b=new c.Rect({x:-d,y:-d,width:b,height:b,fill:"grey",stroke:"black",U:1.5,ge:3});var f=new c.ba({stroke:"white",U:1}),g=new c.ba({stroke:"white",U:1}),d=d-5;f.ld([-d,-d,d,d]);g.ld([-d,d,d,-d]);a=new c.J({x:a,y:0});a.G("click",e);a.add(b);a.add(f);a.add(g);return a}
function Ga(){var b=Ha,a={},e;for(e in b){a[e]={};for(var d=0;d<b[e].length;d++)for(var f=0;f<b[e][d].length;f++)a[e][b[e][d][f]]=1}var g={};for(e in b)for(var k={},d=b[e].length-1;0<=d;d--){for(var f=b[e][d],h={},l=0;l<f.length;l++){var m=ka[e][f[l]],n;0!==m.ke?n=m.ke.id+"_"+m.Jg.id:n=m.id;h[n]=h[n]||[];h[n].push(m)}for(var p in h){var m=h[p][0],r={},q={};(function w(b,d){if(0===b)return-1;if(b.id!==m.id&&b.id in a[e])return{id:b.id,Ka:d};var f=w(b.Jg,d+1),g=w(b.ke,d+1);if(-1!==f&&-1!==g){var h=
!1;if(f.Ka===g.Ka)for(var k=ka[e][f.id],l=0;l<k.Hg.length;l++)if(g.id===k.Hg[l].id){h=!0;break}h?r[g.id+"_"+f.id]=f.Ka:(q[f.id]=f.Ka,q[g.id]=g.Ka)}else-1!==f?q[f.id]=f.Ka:-1!==g&&(q[g.id]=g.Ka);return-1})(m,0);d in k||(k[d]={});l=h[p][0].id;if(1!==h[p].length)for(f=1;f<h[p].length;f++)l+="_"+h[p][f].id;k[d][l]={Gg:r,Lf:q}}var h=[],t;for(t in k){var f=!0,v;for(v in k[t])if(0!==Object.getOwnPropertyNames(k[t][v]).length){f=!1;break}f||h.push(k[t])}g[e]=h}return g}var Ia=new c.J,Ja=new c.J;
function Ka(b,a,e){var d={x:9999,y:9999},f={x:0,y:0},g=new c.J,k=[];g.add(Ja);g.add(Ia);Q.add(g);var h=20;d.x=h;for(var l=a.length-1,m=0;m<a.length;m++){var n=a[m][0].split("_"),p=a[m][1];d.y>p&&(d.y=p);var r=n[0],n=L[r].Wa[n[1]].wa;n.gd=n.Ta();n.fd=L[r].group;n.remove();n.Eg(!1);Ia.add(n);n.setPosition({x:n.fd.na()+n.gd.x,y:n.fd.va()+n.gd.y});r=R({node:n,x:h+100,y:p+40,Da:function(){if(0===l--){var a=Ja,d;for(d in b)for(var f in b[d]){var h=f.split("_"),k=b[d][f],m=null;if(1===h.length)if(h=L[d].Wa[f].wa.Ta(),
null===k.Kb){var n=L[d].Wa[k.ic].wa.Ta();a.add(wa(h,n,k.Nc))}else m={x:h.x,y:h.y+k.Kb/3},a.add(wa(h,m,!1));else m=h[1],h=L[d].Wa[h[0]].wa.Ta(),m=L[d].Wa[m].wa.Ta(),h={x:(h.x+m.x)/2,y:h.y},m={x:h.x,y:h.y+k.Kb/3},a.add(wa(h,m,!1));if(null!==m){for(var h=k.ic.split("_"),n=99999999999,p=999999999,r=0;r<h.length;r++){var y=L[d].Wa[h[r]].wa.Ta(),E=null;if(k.ed)E=wa(m,y,!1);else{for(var E=m,K=y,J=0;va(J);)--J;E=wa(E,K,!1,J)}a.add(E);y.x<n&&(n=y.x,p=E.ac()[3])}1<k.text&&(a.add(new c.wb({x:(m.x+n)/2,y:p,Qg:6,
fill:"white",stroke:"black",U:1})),a.add(new c.Text({x:(m.x+n)/2-3,y:p-5,text:k.text,fontSize:11,fill:"black"})))}}P.A();Q.A();e(g)}}});k.push(r);h+=60;h>f.x&&(f.x=h);p>f.y&&(f.y=p)}P.A();for(a=0;a<k.length;)k[a++].play();return{min:d,max:f,group:g}}
function La(b){function a(a,b,e){b=e+"_"+b;for(e=0;e<d.length;e++)if(b===d[e][0]){d.splice(e,1);break}d.push([b,a])}function e(a,b,d){b in f[a]?d.Ka<f[a][b].Ka&&(f[a][b]=d):f[a][b]=d}var d=[],f={},g;for(g in b){var k=0;f[g]={};for(var h=0;h<b[g].length;h++)for(var l in b[g][h]){var m=b[g][h][l].Lf,n=b[g][h][l].Gg,p;for(p in n){var r=p.split("_"),q=r[0],r=r[1];a(k,q,g);a(k,r,g);e(g,q,{ic:r,Nc:L[g].Ai["m:"+q+"-"+r].pi,Kb:null,text:null,ed:h==b[g].length-1});var t=n[p];e(g,q+"_"+r,{ic:l,Nc:!1,Kb:50,
text:t,ed:h==b[g].length-1})}for(var v in m){n=!1;q=Object.keys(f[g]);for(r=0;r<q.length;r++){t=q[r].split("_");2!=t.length&&(t=[t]);for(var u=0;u<t.length;u++)if(v===t[u]){n=!0;break}if(n)break}n||(k+=50,a(k,v,g),t=m[v],e(g,v,{ic:l,Nc:!1,Kb:50,text:t,ed:h==b[g].length-1}))}m=l.split("_");n=k+50;for(q=0;q<m.length;q++)a(n,m[q],g)}}return{Fg:f,Tg:d}}var S={},Ma=!1,T,Oa=Aa("Select Mode",0,function(){Na()});P.add(Oa);
function Pa(){Qa();T.qb();T.P();Ma=!1;S={};Ha={};Ra={};Oa=Aa("Selection",0,function(){Na()});P.add(Oa);null!==Sa&&(Sa.remove(),ta.A());Q.A();P.A()}
function Na(){Oa.P();T=new c.J({x:0,y:0,width:O.C(),height:O.F()});T.add(new c.Rect({x:0,y:0,width:O.C(),height:O.F(),fill:"black",U:0,opacity:.1}));T.add(Aa("Select Affecteds",0,function(){Ma=!Ma;for(var a in S){var b=S[a];b.wa.children[0].h.fill===la[2]&&(Ma&&!b.selected||!Ma&&b.selected)&&b.Hb.ha("click")}console.log("affecteds:",Object.keys(S).filter(function(a){return!0===S[a].Yd}))},!1));T.add(Aa("Submit / Close",20,Ta));for(var b in L){var a=Ua(L[b].group.Hi.ta(),b);T.add(a);for(var e in L[b].Wa)if(0!=
e){var a=b+"_"+e,d=L[b].Wa[e].wa,f=d.ta(),f=Va(f,a,!0);d.h.draggable=!1;S[a]={Hb:f,selected:!1,wa:d};T.add(f)}}P.add(T);T.vb(20);P.A()}function Va(b,a,e){b=ya(b);b.G("click",function(){this.Gk(!S[a].selected);S[a].selected=!S[a].selected;e?P.A():Q.A()});return b}function Ua(b,a){var e=ya(b,20);e.G("click",function(){for(var b in S)b.split("_")[0]==a&&S[b].Hb.ha("click");P.A()});return e}var Ha={},Ra={},U=new c.J;U.top=new c.J;U.bottom;var Wa=0,Xa=100,Ea=20;
function Fa(){Ya(!1,function(){for(var b in Ra)for(var a in Ra[b]){var e=L[b].Wa[a].wa,d=e.gd,f=e.fd;e.remove();e.Eg(!0);f.add(e);e.setPosition({x:e.na()-f.na(),y:e.va()-f.va()});R({node:e,x:d.x,y:d.y}).play()}Q.qb();Q.A();Pa()})}
function Ta(){var b={},a={},e;for(e in S){var d=S[e];if(d.selected){var f=e.split("_")[0],g=e.split("_")[1];f in b||(b[f]={},a[f]={});a[f][g]=1;d=d.wa.va();b[f][d]=b[f][d]||[];b[f][d].push(g)}}for(f in b){e=f;for(var g=b[f],d=ma(g),k=[],h=0;h<d.length;h++)k.push(g[d[h]]);b[e]=k}Ha=b;Ra=a;if(0===Object.getOwnPropertyNames(Ra).length)return Pa();b=Ga();Za(b)}
function Za(b){var a=La(b);b=a.Fg;a=a.Tg;Q.add(U);U.background=new c.Rect({width:window.innerWidth,height:window.innerHeight,fill:"black",opacity:.5});U.add(U.background);var e=Ka(b,a,function(a){$a(e,a)})}
function $a(b,a){min_pos=b.min;max_pos=b.max;Wa=min_pos.y;U.top.setPosition({x:100+(min_pos.x-Ea),y:40+(min_pos.y-Ea)});U.top.rect=xa({width:max_pos.x-min_pos.x,height:max_pos.y-min_pos.y+3*Ea});U.top.add(U.top.rect);U.top.Oc=Ba();U.top.add(U.top.Oc);U.add(Aa("Align Pedigree",0,function(){ab()}));U.add(Aa("Find Homology",20,function(){bb()}));a.remove();U.top.add(a);a.Na(-U.top.va());a.Xg(-U.top.na()+10);U.add(U.top);(new c.N({node:U.top,x:Xa,y:Ea,duration:.2,Da:function(){Ya(!0)}})).play();P.A();
Q.A()}
function Ya(b,a){a=a||0;U.Qe=30;b?(delete U.bottom,U.sd=Aa("Range Slider",40,function(){cb(!db)}),U.xg=Aa("Marker Search",60,eb),U.add(U.sd),U.add(U.xg),U.bottom=new c.J({x:U.top.na(),y:U.top.rect.F()+U.Qe,id:"scroll_panel"}),U.bottom.rect=xa({height:0,width:U.top.rect.C()}),U.bottom.add(U.bottom.rect),U.add(U.bottom),U.bottom.vb(-2),R({node:U.bottom.rect,height:10*(3+H),Da:function(){var b=new c.J({draggable:!0,ie:function(a){var b=this.parent.ta();return{x:b.x,y:b.y+10*Math.floor((a.y-b.y)/10)}}});
b.G("mouseup",function(){fb(!1);gb(V,W);hb();ta.A()});L.ug=U.bottom;L.ye=b;U.bottom.add(b);ib();0!==a&&a()}}).play()):(U.sd.P(),delete U.sd,L.ye.Yc(),R({node:U.bottom.rect,height:0,Da:function(){U.bottom.qb();U.bottom.P();0!==a&&a()}}).play());Q.A()}var jb=!1;
function ab(){var b=Ia,a=Ja;jb=!jb;var e=[];if(jb){a.Yc();for(var d=Wa+40,f=0;f<b.children.length;f++){var g=b.children[f];g.hd=g.va();e.push(R({node:g,x:g.na(),y:d}))}U.top.rect.Lg=U.top.rect.F();e.push(R({node:U.top.rect,height:3*Ea}));void 0!==U.bottom&&(U.bottom.hd=U.bottom.va(),e.push(R({node:U.bottom,y:3*Ea+U.Qe})))}else{for(var k=b.children.length-1,f=0;f<b.children.length;f++)g=b.children[f],e.push(R({node:g,x:g.na(),y:g.hd,Da:function(){0===k--&&a.show()}}));e.push(R({node:U.top.rect,height:U.top.rect.Lg}));
void 0!==U.bottom&&e.push(R({node:U.bottom,y:U.bottom.hd}))}for(b=0;b<e.length;)e[b++].play()}var kb=document.getElementById("index_submit"),lb=document.getElementById("marker_list_max"),mb=document.getElementById("marker_min"),nb=document.getElementById("marker_max");mb.onchange=ob;kb.onclick=pb;function ob(){for(var b="",a=x.indexOf(mb.value);a<x.length;a++)b+='<option value="'+x[a]+'" />';lb.innerHTML=b}function eb(){document.getElementById("index_class").style.display="block"}
function pb(){var b=x.indexOf(mb.value),a=x.indexOf(nb.value);if(-1===b||-1===a)return console.log("invalid range"),0;if(b>a)return console.log("min must be greater than max"),0;console.log(b,a);V=b;W=a;fb(!0);document.getElementById("index_class").style.display="none"}var X;
function bb(){X=new c.J({x:0,y:0,width:O.C(),height:O.F()});X.rect=new c.Rect({x:0,y:0,width:O.C(),height:O.F(),fill:"black",U:0,opacity:.2});X.Oe=Aa("Submit Selection",0,function(){qb=[];for(var a in S)S[a].selected&&(S[a].Hb.stroke("green"),qb.push(a)),S[a].Hb.Kg("click");U.top.moveTo(U);U.top.Oc.show();X.rect.P();X.Oe.P();Q.A();if(0===qb.length)return-1;a=qb;for(var b=[],d=0;d<a.length;d++){var e=a[d].split("_"),l=e[0],e=e[1],m=ka[l][e].ze;b.push({data:[m[0].Ib,m[1].Ib],Df:2==ka[l][e].Yd})}for(var d=
x.length,l=new Int8Array(d),e=new Int8Array(d),m=new Int8Array(d),n=0;n<d;n++){for(var p=-1,r=0,q=0,t=-1,v=-1,u=0,w=0;w<b.length;w++){var z=b[w].Df,A=z?1:-1,D=b[w].data[0][n],B=b[w].data[1][n];if(D===B&&(-1===p?(p=D,r+=2*A):p===D&&(r+=2*A),z))continue;-1===t?(t=D,v=B,q+=2*A,u+=2*A):t===D?(q+=A,v===B&&(q+=A,u+=2*A)):t===B&&(q+=A,v===D&&(q+=A,u+=2*A))}l[n]=r;e[n]=q;m[n]=u}rb={Ve:l,Ue:e,Se:m,dk:a.length};sb=!0;tb.style.display="block";ub();return 0});X.add(X.rect);X.add(X.Oe);U.top.moveTo(X);U.top.Oc.Yc();
for(var b=0;b<Ia.children.length;b++){var a=Ia.children[b];if(0!=a){var e=a.h.id,d=a.ta(),d=Va(d,e,!1);S[e]={Hb:d,selected:!1,wa:a};X.add(d)}}Q.add(X);X.vb(20);Q.A()}var qb,rb,vb,sb=!1,tb=document.getElementById("homology_buttons"),wb=document.getElementById("plot_type"),xb=document.getElementById("zygous_min_stretch"),yb=document.getElementById("zygous_min_score"),zb="HOM",Ab=0,Bb=0,Cb=document.getElementById("hom_exit"),Db=document.getElementById("print_current"),Eb=document.getElementById("print_all");
document.getElementById("plot_redraw").onclick=ub;Eb.onclick=Fb;Db.onclick=Gb;Cb.onclick=Qa;function Fb(){Hb()}function Gb(){Hb(V,W)}function Qa(){X.qb();X.P();sb=!1;tb.style.display="none";Ib();Q.A()}
function ub(){zb=wb.options[wb.selectedIndex].value;Ab=parseInt(xb.value);Bb=parseInt(yb.value);var b=rb[zb],a=Ab,e=Bb,d=cb(!0),f=d.Rg,g=f.ac(),g=g[3]-g[1],k=b.length;Ib(!1);for(var h=[],l=0,m=b.length,n=0;n++<m;)if(b[n]<=e){if(l>=a)for(l=n-(l+1);l++<n;)h[l]=b[l];l=0}else l++;if(l>=a)for(l=n-(l+1);l++<n;)h[l]=b[l];b=[];for(n=0;n++<m;)h[n]=h[n]||0,0>h[n]&&(h[n]=0),b.push(h[n],n);console.log(b);vb=b;f=new c.ba({x:f.na(),y:f.va(),l:b,stroke:"blue",U:.3,closed:!0,fill:"blue",alpha:.3});f.Je(g/k);f.Ie(15);
d.gc=f;d.add(d.gc);d.gc.vb(-99);ta.A()}
function Hb(b,a){var e=qb;a=a||x.length-1;for(var d="          ",f=0;f<e.length;f++)var g=e[f].split("_"),k=g[0],g=g[1],d=d+("\t"+g.toString()+"_"+(2==ka[k][g].Yd?"a":"u"));for(var d=d+"\tHom  \tHet  \tChet\n",h=b||0;h<=a;h++){d+=x[h];for(f=0;f<e.length;f++)g=e[f].split("_"),k=g[0],g=g[1],k=ka[k][g].ze,d+="\t"+k[0].Ib[h].toString()+""+k[1].Ib[h].toString();f="\t "+rb.Ve[h].toString()+"\t "+rb.Ue[h].toString()+"\t "+rb.Se[h].toString();f=f.replace(/ -/g,"-");d+=f+"\n"}var l=null;window.open(function(a){a=
new Blob([a],{type:"text/plain"});null!==l&&window.URL.revokeObjectURL(l);return l=window.URL.createObjectURL(a)}(d))}function Ib(b){b=b||!0;void 0!==Sa.gc&&(Sa.gc.P(),b&&ta.A())}
var Kb=function(b,a){var e;void 0===a||0===a.length?e=function(){return!1}:"number"===typeof a?e=function(b){return b===a}:1===a.length?(a=a[0],e=function(b){return b===a}):e=function(b){return-1!==a.indexOf(b)};for(var d=b.length-1,f=[{Ja:[],Ob:0}],g=[],k={},h=0,l=!0;;){for(;0!==f.length;){h++;var f=f.sort(function(a,b){return b.Ja.length-a.Ja.length}).slice(0,4),m=f[0].Ja,n=f[0].Ob,p=m.length,r=b[p].Mc.length;console.log("-Route:",m);console.log("    current_row="+p);console.log("    num_colors =",
r);for(var q={},t={},v=0;v<r;v++){var u=b[p].Mc[v];console.log("    - trying color "+u);if(e(u))console.log("    - EXCLUDE!");else{for(var w=p+1;w<=d;){var z=b[w].Mc;console.log("       - testing "+u+" against "+z+" @i "+w);if(-1===z.indexOf(u))if(1===z.length&&z[0]===Jb)t[w]=0;else break;w++}w-=p;console.log("    - stretches for ",w,"before index",w+p);q[w]=u}}p=Object.keys(q).sort(function(a,b){return b-a});console.log("    ordered_routes=",q);console.log("    reversed_order=",p);for(r=0;r<p.length;r++)if(u=
p[r],l&&1>=u)console.log("    dead_end route, skipping");else{v=m.slice();for(w=u;0<w--;)v.push(q[u]);console.log("   - adding '"+q[u]+"' "+u+"x  to ",v);for(var A in t)v.length>A&&(v[A]=Jb);u={Ja:v,Ob:n+1};w=v.reduce(function(a,b){return a+""+b});w in k||(k[w]=0,v.length===b.length?g.push(u):f.push(u))}f.splice(0,1);t={};console.log("    explored="+f.map(function(a){return"["+a.Ja+"] "}));console.log("    complete="+g.map(function(a){return"["+a.Ja+"] "}))}if(0===g.length){if(l){l=!1;console.log("repeating without stretches");
g=[];f=[{Ja:[],Ob:0}];k={};continue}return null}break}e=1===g.length?g[0].Ja:g.sort(function(a,b){return a.Ob-b.Ob})[0].Ja;console.log("best_routes A*",g);console.log(" with best=",e);console.log("  in "+h+" cycles");console.log("SRC ARRAY=",b.map(function(a){return""+a.Mc+""}));return e}.toString(),Lb=Kb.slice(Kb.indexOf("{")+1,Kb.lastIndexOf("}")).replace(/console\.log\(.*\)\;/g,"");new Function("array","exclude_list",Lb);var Mb=[],Jb=-1,V=0,W=H,Nb;
function ib(){var b=Ra;Nb=[];for(var a in b)for(var e in b[a])Nb.push(ka[a][e].ze);fb(!0)}
function fb(b){var a=L.ye,e=L.ug.ta().y-a.ta().y,e=Math.floor(e/10);V+=e;W+=e;a.qb();a.Na(0);0>V&&(V=0,W=H);W>x.length-1&&(W=x.length-1,V=W-H);for(var e=new c.J({x:-50,y:30}),d=new c.J({}),f=0;f<Nb.length;f++)for(var g=0;2>g;g++)for(var k=Nb[f][g].Mj,h=V;h<=W;){for(var l=h,m=k[l];k[++l]===m&&l<=W;);h=new c.Rect({x:67+(60*f+14*g),y:10*(h-V-2),width:12,height:10*(l-h),fill:Mb[m],U:1,stroke:"white"});d.add(h);h=l}e.add(d);d="";for(f=V;f<=W;f++){d+=x[f]+pa;for(g=0;g<Nb.length;g++)d+=ra+Nb[g][0].Ib[f]+
sa+Nb[g][1].Ib[f];d+="\n"}d=new c.Text({x:-38,y:-20,text:d,fontFamily:"monospace",fontSize:10,fill:"black"});e.add(d);a.add(e);if(sb){e=vb;d=[0,0];f=1;for(g=V;g<=W;g++)k=e[2*g],k=0>k?0:k*Nb.length*10,l=10*(f+1),d.push(k,10*f),d.push(k,l),f++;d.push(0,10*f);e=line=new c.ba({x:-87,y:10,stroke:"red",U:1,closed:!0,fill:"red",opacity:.3,l:d});a.add(e)}a.parent.show();Q.A();b&&(O.da(window.innerWidth),b=10*(H+5)+200,b<window.innerHeight&&(b=window.innerHeight),O.$(b),void 0!==U.background&&(U.background.da(window.innerWidth),
U.background.$(b),Q.A()))}var Ob=0,Pb=0;function Qb(b){var a;if(this.Bg){var e=!1;b.y>=Rb&&(b.y=Rb);b.y<=Y.y&&(b.y=Y.y+1,e=!0);Sb=b.y;a=(b.y-Y.y)/M;Tb=a=e?0:Math.floor(a*x.length)}else e=!1,b.y<=Sb&&(b.y=Sb),b.y>Y.y+M&&(b.y=Y.y+M,e=!0),Rb=b.y,a=(b.y-Y.y)/M,Ub=a=e?x.length-1:Math.floor(a*x.length);this.message.Xa(x[a]);hb();return{x:this.ta().x,y:b.y}}
function Vb(b){b=b.y-Y.y;var a=b+Pb;0>b?(b=0,a=b+Pb):a>=M&&(a=M,b=a-Pb);var e=b;Wb.Na(e);Xb.Na(a);Tb=0===e?0:Math.floor(e*x.length/M);Ub=a===M?x.length-1:Math.floor(a*x.length/M);Wb.message.Xa(x[Tb]);Xb.message.Xa(x[Ub]);Sb=e+Y.y;Rb=a+Y.y;return{x:this.ta().x,y:b+Y.y}}function hb(){if(void 0!==Y){Ob=Sb-Y.y;Pb=Rb-Sb;var b=[-na,0],a=[-na,Pb];Z.Na(Ob);Z.Dg.ld([-0+b[0]+2*na,b[1]+0,b[0],b[1]+0,a[0],a[1]+0,-0+a[0]+2*na,a[1]+0]);Z.message.Xa(Ub-Tb);Z.message.Na(Pb/2-5)}}
function gb(b,a){Tb=b;Ub=a;var e=Tb/x.length*M,d=Ub/x.length*M;void 0!==Wb&&(Wb.Na(e),Xb.Na(d),Wb.message.Xa(x[Tb]),Xb.message.Xa(x[Ub]),Sb=e+Y.y,Rb=d+Y.y)}function Yb(b){toggle_haplotypes&&(V=Tb,W=Ub,H=W-V,U.bottom.rect.$(10*(H+3)),fb(b))}var Sa=null,db=!1,Sb,Tb,Rb,Ub,Y,Z,Wb,Xb;function cb(b){db=b;var a=Zb();b?(ta.add(a),gb(0,H),hb()):a.remove();ta.A();return a}
function Zb(){var b=U.top.na()+U.top.rect.C()+20;function a(a){var b=new c.J({x:0,y:0,draggable:!0,ie:Qb}),d=new c.Text({x:3+2*na,y:(a?-35:35)-5,text:"",fontFamily:"Arial",fontSize:10,fill:"white"}),e=new c.ba({l:[0,0,na+0,0,na+0,a?-35:35,0+2*na,a?-35:35],stroke:"white",U:1.3});b.G("mouseup",function(){Yb(!0)});b.add(d);b.add(e);b.message=d;b.Bg=a;return b}if(null!==Sa)return Sa;var e=new c.J({x:b,y:60,draggable:!0});Sa=e;var d=new c.ba({x:0,y:0,stroke:"red",U:5,lineCap:"round",l:[0,0,0,M]});d.G("mouseup",
function(){Y=this.ta();Sb=Wb.ta().y;Rb=Xb.ta().y});Z=new c.J({draggable:!0,ie:Vb});Z.G("mousedown",function(){Q.Mf()});Z.G("dragmove",function(){50>H&&Yb()});Z.G("mouseup",function(){Q.Pf();Yb()});var f=new c.ba({x:0,y:0,stroke:"white",U:1.3,l:[0,0,0,M]}),g=new c.Text({x:10,y:M/2,text:"win",fontFamily:"monospace",fontSize:10,fill:"red"});Z.add(f);Z.add(g);Z.Dg=f;Z.message=g;Wb=a(!0);Xb=a(!1);Xb.Na(M);Y={x:b,y:60};Sb=60;Rb=60+M;e.add(d);e.add(Wb);e.add(Xb);e.add(Z);e.Rg=d;return e}
navigator.u=function(){var b=navigator.userAgent,a,e=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(e[1]))return a=/\brv[ :]+(\d+)/g.exec(b)||[],["IE",a[1]||""];if("Chrome"===e[1]&&(a=b.match(/\b(OPR|Edge)\/(\d+)/),null!=a))return[a.slice(1)];e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(a=b.match(/version\/(\d+)/i))&&e.splice(1,1,a[1]);return e}();
function $b(){var b;document.getElementById("content").innerHTML='<head><h1 style="color: #111; font-family: \'Helvetica Neue\', sans-serif; font-size: 100px; font-weight: bold; letter-spacing: -1px; line-height: 1; text-align: center;  " >NOPE.</h1><h2 style="color: #111; font-family: \'Open Sans\', sans-serif; font-size: 30px; font-weight: 300; line-height: 32px; margin: 0 0 72px; text-align: center;" >Not This Browser.<br/>Not In A Million Years.<br/><br/>Try <a href="https://www.mozilla.org/en-US/firefox/new/" style=\'color:DarkOrange; text-decoration:none;font-family:"Papyrus",fantasy;\' >Firefox</a> or <a style=\'color:DodgerBlue;text-decoration:none;font-family:"Arial",sans-serif;\' href="http://chromium.woolyss.com/">Chromium.</a><br/><div style=\'font-size:12px;\'>Chrome/Opera/Safari (if you must...)</div></h2></head><body></body>';window.addEventListener("error",
function(a){a.preventDefault();a.stopPropagation()},!1);var a="copy cut paste beforeunload blur change click contextmenu dblclick focus keydown keypress keyup mousedown mousemove mouseout mouseover mouseup resize scroll DOMNodeInserted DOMNodeRemoved DOMNodeRemovedFromDocument DOMNodeInsertedIntoDocument DOMAttrModified DOMCharacterDataModified DOMElementNameChanged DOMAttributeNameChanged DOMActivate DOMFocusIn DOMFocusOut online offline textInput abort close dragdrop load paint reset select submit unload".split(" ");
for(b=0;b<a.length;b++)window.addEventListener(a[b],function(a){a.stopPropagation()},!0);window.stop&&window.stop();throw"";}var ac=navigator.u[0],bc=navigator.u[1];"Chrome"===ac&&43<=bc||"Firefox"===ac&&38<=bc||(console.log(ac,bc),$b());
//////
</script>












</body>
</html>
