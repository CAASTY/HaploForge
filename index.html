<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id='content'>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">
        <title>Haplotype Reconstruction</title>
        <link rel="stylesheet" type="text/css" href="styles/mainpage.css" >
        <link rel="stylesheet" type="text/css" href="styles/main.css" >
        <link rel="stylesheet" type="text/css" href="styles/filebox.css" >
        <link rel="stylesheet" type="text/css" href="styles/tooltip.css" >
	<!-- STYLE -->
    </head>
    <body onresize="resizeCanvas()" >

        <div id="useropts">
          <label><input type="checkbox" onchange="userOpts.allowTransitions=this.checked;" checked />Transitions</label>
          <br />
          <label><input type="checkbox" onchange="userOpts.showTooltips=this.checked;" checked />Tooltips</label>
        </div>



         <!-- STRICTLY TESTING -->
         <div id="filebox" >
            <input type="button" id="filebox_close" value="X">

            <select id="fileselector">
              <option selected value="null" >---</option>
              <option value="allegro">Allegro</option>
              <option value="genehunter">Genehunter</option>
              <option value="simwalk" >Simwalk (N/A)</option>
              <option value="merlin" >Merlin (N/A)</option>
            </select>

            <!-- null -->
            <div id="box_null" class="boxed">
            <h6>            
              Please select a file format from the above list
              </h6>
            </div>

            <!-- Allegro -->
            <div id="box_allegro" class="upload_box border">
              <label for="allegro_haplo"><input type="file" id="allegro_haplo">ihaplo file
                  <div class="tooltip_box" >?</div>
                  <div class="tooltip_text"><p>Haplotypes file</p>Contains phased genotypes and pedigree data. Points of recombination are determined by HaploHTML5's own algorithm.</div>
              </label>
              <br/>
              <label for="allegro_descent"><input disabled type="file" id="allegro_descent">(optional) inher file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Descent Graph file</p>Contains founder allele groups and descent vectors. Use this instead of HaploHTML5's own method for determining points of recombination.</div>
              </label>
              <br/>
              <label for="allegro_map"><input disabled type="file" id="allegro_map">(optional) map
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text"><p>Map file</p>Will provide genetic marker distances in addition to the marker identifiers already present in the ihaplo and inher output files.</div>
              </label>
              <br/>
              <br/>
              <input id="submit_allegro" type="button" value="Submit" />
            </div>


            <!-- Genehunter -->
            <div id="box_ghm" class="upload_box border">
              <label for="ghm_haplo"><input type="file" id="ghm_haplo">haplo file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Haplotypes file</p>Contains phased genotypes and partial pedigree data. Points of recombination are determined by HaploHTML5's own algorithm.</div>
              </label>
              <br/>
              <label for="ghm_map"><input disabled type="file" id="ghm_map">(optional) map
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Map file</p>Provides marker identifiers and genetic distances.</div>
              </label>
              <br/>
              <label for="ghm_ped"><input disabled type="file" id="ghm_ped">(optional) pedin
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Pedigree file</p>Without this, genders are inferred from the haplo file through parentage. A pedigree file is required to correctly determine the genders of the last generation.</div>
              </label>
              <br/>
              <br/>
              <input id="submit_ghm" type="button" value="Submit" onclick="test()" />
            </div>

            <!-- Simwalk -->
            <div id="box_sw" class="upload_box border">
              <label for="sw_haplo">
                <input disabled type="file" id="sw_haplo" >HEF file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Haplotypes and Descent Graph</p>Contains pedigree, phased genotypes, and descent graph vectors.</div>
              </label>
              <br/>
              <label for="sw_infer_box" >
                <input disabled type="checkbox" id="sw_infer_box" />
                <h5>Ignore descent graph vectors?</h5>
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p></p>Ignores vectors in HEF file and uses HaploHTML5's own algorithm to determine points of recombination.</div>
              </label>
              <br />
              <label for="sw_map">
                <input disabled type="file" id="sw_map" />(optional) map
                  <div class="tooltip_box" >?</div>
                  <div class="tooltip_text" ><p>Map file</p>Provides marker identifiers and genetic distances.</div>
              </label>
              <br/>
              <br/>
              <input id="submit_sw" type="button" value="Submit" />
            </div>

            <!-- Merlin -->
            <div id="box_merlin" class="upload_box border">
              <label for="merlin_ped">
                <input disabled type="file" id="merlin_ped" >pedin file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Pedigree file</p>Required file due to the way Merlin splits off pedigree data from haplotype output data.</div>
              </label>
              <br />
              <label for="merlin_haplo">
                <input disabled type="file" id="merlin_haplo">chr file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Haplotypes file</p>Contains phased genotypes and partial pedigree data. Points of recombination are determined by HaploHTML5's own algorithm.</div>
              </label>
              <br />
              <label for="merlin_descent">
                <input disabled type="file" id="merlin_descent" >(optional) flow file
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Descent Graph file</p>Contains founder allele groups and descent vectors. Use this instead of HaploHTML5's own method for determining points of recombination.</div>
              </label>
              <br />
              <label for="merlin_map">
                <input disabled type="file" id="merlin_map">(optional) map
                <div class="tooltip_box" >?</div>
                <div class="tooltip_text" ><p>Map file</p>Provides marker identifiers and genetic distances.</div>
              </label>
              <br/>
              <br/>
              <input id="submit_merlin" type="button" value="Submit" />
            </div>
          </div>




        <div id="maincircle">
<!--           <video poster="http://i.imgur.com/qiOZUij.webm" id="bgvid" loop autoplay>
              <source src="http://i.imgur.com/qiOZUij.webm">
           </video> -->

          <input id="haploupload" type="button" 
                 onclick="MainButtonActions.fileUpload()" />

          <input id="haploresume" type="button"
                 onclick="MainButtonActions.loadHaploFromStorage()"  />
          
          <input id="pedmodebutton" type='button'
                 onclick="MainButtonActions.createNewPed()" />      

          <input id="pedresume" type="button" 
                 onclick="MainButtonActions.loadPedFromStorage()" />

          <ul class="nodots">
            <li class="smallspace">
              <h1>HaploHTML5</h1>
              <h2 class="smallspace">Extensive Haplotype Resolution and Pedigree Creation Tool</h2>
             </li>
             <li>
              <label for="haploupload">Visualize New Haplotypes</label>    
              <label id="haploresume_label" for="haploresume">Resume Previous Analysis</label>    
            </li>
            <li>
              <hr class="style15">
            </li>
            <li>
               <label for="pedmodebutton">Create New Pedigree</label>   
               <label id="pedresume_label" for="pedresume">Resume Pedigree</label>     
            </li>
          </ul>
        </div>


       <!-- Pedcreate / Selection -->
        <div id="selection_tools" class="input_props" >
          <h3 id="selection_title" ></h3>
          <table id="selection_table" >
          </table>
        </div>




        <!-- Save Dialogs -->
        <div id="save_and_close" class="input_props" >
          <h3 id="save_and_close_title"> General Opts. </h3>
          <table id="save_and_close_table">
          </table>
        </div>


        <!-- Background -->
        <div id='modal_bg' ></div>

        <!-- Status Bar -->
        <div id='status_props' class="status">
            <div class='reflect' id='status_head'>Header</div>
            <div id='status_text'>Details go here</div>
        </div>



        <!-- Message Props -->
        <div id='message_props' class="input_props" >
          <div class='bg' ></div>
          <div class='messages'>
              <h3 id='message_head' >Header</h3>
              <input class='messages' id='message_exit' type='button' value='X' />
              <p id='message_text' >Stuff we can talk about</p>
              <div id="message_inputrow" >
                <input class="messages" type="text" 
                id="message_input" />
                <input class="messages" type="button" 
                id="message_submit" />
              </div>
              <div id="message_buttonsrow" >
                <input class='messages' id='message_yes' type='button' value="Yes" />
                <input class='messages' id='message_no' type='button' value="No" />
              </div>
          </div>
        </div>


        <!-- Family Props -->
        <div id='family_props' class="input_props" >
          <div class='messages'>
             <h3 id='message_head' >Family</h3>
             <input class='messages' id='family_submit' type='button' value='✓' />
          </div>

          <table>
             <tr>
               <td>Fam ID: </td>
               <td><input id='family_id' type='number' /></td>
             </tr>
             <tr>
               <td>Surname:</td>
               <td><input id='family_name' type='text' /></td>
             </tr>
           </table>
        </div>


        <!-- Person Props http://jsfiddle.net/cysCx/258/ -->
        <div id='person_props' class="input_props">
          <div class='messages'>
            <h3 id='message_head'>Person</h3>
            <input class='messages' id='pers_submit' type='button' value='✓' />
            <input class='messages' id='pers_delete' type='button' value='✘' />
          </div>

          <table>
            <tr>
              <td>ID: </td>
              <td>
                <input id='pers_id' type='number' />
              </td>
            </tr>

            <tr>
              <td>Name:</td>
              <td>
                <input id='pers_name' type='text' /> </td>
            </tr>

            <tr>
              <td colspan='2'>
                <input type='checkbox' id='pers_gender_unknown' class='deselector' />
               <div>
                <div style="display:inline;z-index:130">
                  <input type="checkbox" id="pers_gender" name="pers_gender" class="switch" />
                  <label for="pers_gender">
                    <span class="first">Male</span>
                    <span class="second">Female</span>
                  </label>
                </div>
                </div>
              </td>
            </tr>

            <tr>
              <td colspan=2>
                <input type='checkbox' id='pers_affect_unknown' class='deselector' />
                <div>
                <div style="display:inline;">
                  <input type="checkbox" id="pers_affect" name="pers_affect" class="switch" />
                  <label for="pers_affect">
                    <span class="first">Unaffected</span>
                    <span class="second">Affected</span>
                  </label>
                </div>
                </div>
              </td>
            </tr>
          </table>
        </div>



        <div id="homology_buttons">
            <input type=button id='hom_exit' value="X" /> 

            <table>
                <tr>
                    <td>
                        <select id='plot_type'>
                            <option selected >HOM</option>
                            <option>HET</option>
                            <option>CHET</option>
                        </select>
                        <input type=button id='plot_redraw' value="Redraw" />
                    </td>
                </tr>

                <tr>
                    <td>
                    <span class="numbers">
                        <label for='zygous_min_stretch'>Min Exten:</label>
                        <input type=number id='zygous_min_stretch' value="1" min=1 />
                        <label for='zygous_min_score'  >Min Score:</label>
                        <input type=number id='zygous_min_score' value="1" min=1 />
                    </span>

                    </td>
                </tr>
                <tr>
                    <td>
                        <input type=button id='print_all' value="Print All" />
                        <input type=button id='print_current' value="Print Current"/>
                    </td>
                </tr>
            </table>
        </div>


        <div id="index_class" >
           <span class="not-numbers">
                <label for='marker_min'>From:</label>
                <input id='marker_min' list="marker_list_min" />
                <label for='marker_max'>To:</label>
                <input id='marker_max' list="marker_list_max" />
                <datalist id="marker_list_min" ></datalist>
                <datalist id="marker_list_max" ></datalist>
                <input type=button value="Go" id="index_submit" />
            </span>
        </div>


        <div id='container' ><!-- KineticJS creates a canvas for each layer, so no need --></div>

    <!-- CODE GOES HERE -->
        <script src="JS/filehandler/genehunter.js" ></script>
        <script src="JS/filehandler/boxselector.js" ></script>

        <script src="JS/cssfuncs/dialog/message_box.js" ></script>
        <script src="JS/cssfuncs/mainpage/mainpagehandler.js" ></script>
        <script src="JS/cssfuncs/mainpage/mainbuttonactions.js" ></script>
        <script src="JS/cssfuncs/rangemarker/indexmode.js" ></script>
        <script src="JS/cssfuncs/buttonmodes/general.js" ></script>
        <script src="JS/cssfuncs/buttonmodes/sidetool.js" ></script>
        <script src="JS/cssfuncs/buttonmodes/wrapper.js" ></script>


        <script src="JS/frameworks/kinetic-v5.1.0.js" ></script>
        <script src="JS/globals.js" ></script>

        <script src="JS/objs/person.js" ></script>
        <script src="JS/objs/allele.js" ></script>

        <script src="JS/graphics/kinetic_graphics.js" ></script>
        <script src="JS/graphics/global_styles.js" ></script>

        <script src="JS/mode/graph/graph_draw.js" ></script>
        <script src="JS/mode/graph/init_graph.js" ></script>
        <script src="JS/mode/graph/levelgrid.js" ></script>
        <script src="JS/mode/graph/graphicslevelgrid.js" ></script>
           
        <script src="JS/mode/selection/selection_graphics.js" ></script>
        <script src="JS/mode/selection/selection_mode.js" ></script>
        <script src="JS/mode/selection/selection_action.js" ></script>

        <script src="JS/mode/haplo/haplomode.js" ></script>
        <script src="JS/mode/haplo/alignment.js" ></script>

        <script src="JS/mode/pedcreate/familyDraw.js" ></script>
        <script src="JS/mode/pedcreate/personDraw.js" ></script>
        <script src="JS/mode/pedcreate/linedrawOps.js" ></script>
        <script src="JS/mode/pedcreate/matelineDraw.js" ></script>
        <script src="JS/mode/pedcreate/offspringDraw.js" ></script>

        <script src="JS/mode/haplo/blocks/pointer_cleanup.js" ></script>
        <script src="JS/mode/haplo/blocks/astarpath_resolver.js" ></script>
        <script src="JS/mode/haplo/blocks/haploblock_backend.js" ></script>
        <script src="JS/mode/haplo/blocks/haploblock_frontend.js" ></script>

        <script src="JS/mode/haplo/dos/dos.js" ></script>
        <script src="JS/mode/haplo/dos/render_dos.js" ></script>

        <script src="JS/mode/haplo/slider/slider_handler.js" ></script>
        <script src="JS/mode/haplo/slider/marker_slider.js" ></script>

        <script src="JS/mode/homology/homology_selection.js" ></script>
        <script src="JS/mode/homology/homology_buttons.js" ></script>
        <script src="JS/mode/homology/homology_plot.js" ></script>
        <script src="JS/mode/homology/homology_initial_allele_scan.js" ></script>
      
        <script src="JS/utility/filehandler.js" ></script>
        <script src="JS/utility/persistdata.js" ></script>
        <script src="JS/utility/pedprops.js" ></script>
        <script src="JS/utility/familymapOps.js" ></script>
        <script src="JS/utility/uniqueGraphOps.js" ></script>
        <script src="JS/utility/window.js" ></script>
        <script src="JS/utility/keyboard.js" ></script>
        <script src="JS/utility/colors.js" ></script>

        <script src="JS/__test/pedfile_create_view.js" ></script>

        <script src="JS/init.js" ></script>
    </body>
</html>
